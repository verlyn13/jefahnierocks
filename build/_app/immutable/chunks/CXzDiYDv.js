import"./Bzak7iHL.js";import"./CyKQDHEQ.js";import{p as nt,x as o,w as e,A as n,f as B,g as t,B as _t,l as st,t as it,d as k,o as tt,q as rt,k as Xt,m as ft,z as Yt,y as jt,C as bt,v as Ft,s as xt,n as vt,D as $t}from"./CDWPIt_c.js";import{p as r,s as a,b as Jt,a as at,i as Kt,c as Qt,d as Ut}from"./BjAhemba.js";import{s as yt,a as Q,d as Vt,h as Zt,e as wt}from"./BJ63dm5S.js";import{i as dt}from"./Bt7a5Wb6.js";import{o as to,e as oo}from"./BHMwHsqE.js";var eo=st("<button></button>");function no(G,s){nt(s,!1);const[i,O]=at(),v=()=>a(X,"$position",i),I=()=>a(F,"$rotation",i),N=()=>a(t(h),"$zIndex",i),m=()=>a(j,"$borderRadius",i),E=()=>a(Y,"$bgColor",i),$=()=>a(J,"$width",i),M=()=>a(U,"$height",i),w=e(),d=e(),h=e(),p=e();let f=r(s,"node",8),C=r(s,"hidden",8,!1),_=r(s,"toggleHidden",8),y=r(s,"top",8),l=r(s,"left",8),c=r(s,"nodeColor",8,null),A=r(s,"hideable",8);const{position:X,dimensions:H,bgColor:Y,borderRadius:j,rotation:F}=f(),{width:J,height:U}=H;let S=e(null);to(()=>{var x;try{const u=(x=document.querySelector(`#${f().id}`))==null?void 0:x.firstChild;u&&o(S,window.getComputedStyle(u).backgroundColor)}catch(u){console.error(u)}}),n(()=>v(),()=>{o(w,v())}),n(()=>I(),()=>{o(d,I())}),n(()=>B(f()),()=>{Jt(o(h,f().zIndex),"$zIndex",i)}),n(()=>t(S),()=>{o(p,t(S)==="rgba(0, 0, 0, 0)")}),_t(),dt();var b=eo();let P,T;it((x,u)=>{P=yt(b,1,"minimap-node svelte-1hs9omb",null,P,x),T=Q(b,"",T,u)},[()=>({hidden:C(),hideable:A()}),()=>({"z-index":N(),"border-radius":`${m()??""}px`,"--prop-background-color":c()||E()||!t(p)&&t(S)||null,width:`${$()??""}px`,height:`${M()??""}px`,transform:`rotate(${t(d)??""}deg)`,top:`${t(w),B(y()),k(()=>t(w).y-y())??""}px`,left:`${t(w),B(l()),k(()=>t(w).x-l())??""}px`})]),oo("click",b,()=>{A()&&_()(f())}),tt(G,b),rt(),O()}var so=st('<div class="mini-bounding-box svelte-aoq4g"></div>');function io(G,s){nt(s,!1);const[i,O]=at(),v=()=>a($(),"$position",i),I=()=>a(p,"$width",i),N=()=>a(f,"$height",i),m=()=>a(M(),"$color",i);let E=r(s,"dimensions",8),$=r(s,"position",8),M=r(s,"color",8),w=r(s,"groupName",8),d=r(s,"top",8),h=r(s,"left",8);const{width:p,height:f}=E();dt();var C=so();let _;it(y=>{Vt(C,"id",`mini-${w()}-bounding-box`),_=Q(C,`border: solid 4px ${m()??""};`,_,y)},[()=>({top:(v(),B(d()),k(()=>`${v().y-d()}px`)),left:(v(),B(h()),k(()=>`${v().x-h()}px`)),width:`${I()}px`,height:`${N()}px`,"background-color":m()})]),tt(G,C),rt(),O()}var ro=st('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function mo(G,s){nt(s,!1);const[i,O]=at(),v=()=>a(Ht,"$graphBounds",i),I=()=>a(zt,"$groups",i),N=()=>a(Rt,"$dimensions",i),m=()=>a(It,"$scale",i),E=()=>a(Et,"$translation",i),$=()=>a(ht,"$hidden",i),M=()=>a(qt,"$nodes",i),w=()=>a(Mt,"$groupBoxes",i),d=e(),h=e(),p=e(),f=e(),C=e(),_=e(),y=e(),l=e(),c=e(),A=e(),X=e(),H=e(),Y=e(),j=e(),F=e(),J=e(),U=e(),S=e(),b=e(),P=e(),T=e(),x=e(),u=e();let D=Xt("graph"),W=r(s,"width",8,100),q=r(s,"height",24,W),Ct=r(s,"mapColor",8,null),Bt=r(s,"nodeColor",8,null),Nt=r(s,"borderColor",8,null),V=r(s,"corner",8,"SE"),St=r(s,"hideable",8,!1);const lt=.9,Wt=W()*lt,kt=q()*lt,Ht=D.bounds.graphBounds,qt=D.nodes,zt=D.groups,ct=D.transforms,Rt=D.dimensions,ht=I().hidden.nodes,It=ct.scale,Et=ct.translation,Mt=D.groupBoxes,At={clientX:0,clientY:0};function Pt(g){$().has(g)?$().delete(g):$().add(g),Ut(ht,$())}n(()=>v(),()=>{o(d,v())}),n(()=>t(d),()=>{o(h,t(d).top)}),n(()=>t(d),()=>{o(p,t(d).left)}),n(()=>t(d),()=>{o(f,t(d).right)}),n(()=>t(d),()=>{o(C,t(d).bottom)}),n(()=>N(),()=>{o(_,N().width)}),n(()=>N(),()=>{o(y,N().height)}),n(()=>(t(f),t(p)),()=>{o(l,t(f)-t(p))}),n(()=>(t(C),t(h)),()=>{o(c,t(C)-t(h))}),n(()=>(t(l),t(c)),()=>{o(A,t(l)/t(c))}),n(()=>(B(W()),B(q())),()=>{o(X,W()/q())}),n(()=>(t(_),t(y),m(),E()),()=>{o(H,Zt(At,0,0,t(_),t(y),m(),E()))}),n(()=>(t(_),t(l),m()),()=>{o(Y,t(_)/t(l)/m())}),n(()=>(t(y),t(c),m()),()=>{o(j,t(y)/t(c)/m())}),n(()=>(t(H),t(h),t(c)),()=>{o(F,(t(H).y-t(h))/t(c))}),n(()=>(t(H),t(p),t(l)),()=>{o(J,(t(H).x-t(p))/t(l))}),n(()=>(t(A),t(X)),()=>{o(S,t(A)>=t(X))}),n(()=>(t(S),t(l),t(c)),()=>{o(b,t(S)?Wt/t(l):kt/t(c))}),n(()=>(t(c),t(b)),()=>{o(u,t(c)*t(b))}),n(()=>(B(q()),t(u)),()=>{o(T,(q()-t(u))/2)}),n(()=>(t(l),t(b)),()=>{o(x,t(l)*t(b))}),n(()=>(B(W()),t(x)),()=>{o(P,(W()-t(x))/2)}),n(()=>(t(T),t(F),t(u),t(P),t(J),t(x),t(Y),t(j)),()=>{o(U,`
		top: ${t(T)+t(F)*t(u)}px;
		left: ${t(P)+t(J)*t(x)}px;
		width: ${t(Y)*t(x)}px;
		height: ${t(j)*t(u)}px;`)}),_t(),dt();var K=ro();let ut,gt;var Z=ft(K);let pt;var mt=ft(Z);wt(mt,1,()=>(M(),k(()=>Array.from(M().entries()))),([g,z])=>g,(g,z)=>{var L=bt(()=>$t(t(z),2));let R=()=>t(L)[1];var ot=Yt(),Lt=jt(ot);{var Gt=et=>{{let Ot=Ft(()=>($(),R(),k(()=>$().has(R()))));no(et,{get node(){return R()},get top(){return t(h)},get left(){return t(p)},get nodeColor(){return Bt()},get hidden(){return t(Ot)},toggleHidden:Pt,get hideable(){return St()}})}};Kt(Lt,et=>{R(),k(()=>R().id!=="N-editor")&&et(Gt)})}tt(g,ot)});var Tt=xt(mt,2);wt(Tt,1,()=>(w(),k(()=>Array.from(w().entries()))),([g,z])=>g,(g,z)=>{var L=bt(()=>$t(t(z),2));let R=()=>t(L)[0];io(g,Qt(()=>t(L)[1],{get top(){return t(h)},get left(){return t(p)},get groupName(){return R()}}))}),vt(Z);var Dt=xt(Z,2);vt(K),it((g,z,L)=>{ut=yt(K,1,"minimap-wrapper svelte-1qxvbux",null,ut,g),gt=Q(K,"",gt,z),pt=Q(Z,"",pt,L),Q(Dt,t(U))},[()=>({SW:V()==="SW",NE:V()==="NE",SE:V()==="SE",NW:V()==="NW"}),()=>({width:`${W()??""}px`,height:`${(q()?q():W())??""}px`,"--prop-minimap-border-color":Nt(),"--prop-minimap-background-color":Ct()}),()=>({width:`${t(l)??""}px`,height:`${t(c)??""}px`,transform:`scale(${t(b)??""})`})]),tt(G,K),rt(),O()}export{mo as default};
