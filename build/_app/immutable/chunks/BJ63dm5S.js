const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CXzDiYDv.js","./Bzak7iHL.js","./CyKQDHEQ.js","./CDWPIt_c.js","./BjAhemba.js","./BHMwHsqE.js","./Bt7a5Wb6.js","./DRPH4E--.js","./BtX3fOzr.js","./DDbzpnx_.js","./Bo29Zd8W.js","./B2BjHTou.js","../assets/DrawerController.SXQJPTk2.css","./CpgJt3K4.js"])))=>i.map(i=>d[i]);
var Xr=Object.defineProperty;var $o=t=>{throw TypeError(t)};var Yr=(t,e,n)=>e in t?Xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xo=(t,e,n)=>Yr(t,typeof e!="symbol"?e+"":e,n),ho=(t,e,n)=>e.has(t)||$o("Cannot "+n);var nn=(t,e,n)=>(ho(t,e,"read from private field"),n?n.call(t):e.get(t)),zn=(t,e,n)=>e.has(t)?$o("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),go=(t,e,n,r)=>(ho(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yo=(t,e,n)=>(ho(t,e,"access private method"),n);import"./Bzak7iHL.js";import"./CyKQDHEQ.js";import{i as Gr,l as ur,c as Kr,d as Fr,f as Hr,j as jr,n as Vr,k as Zr,p as qr,e as Ee,s as Fn,r as Mo,w as x,o as en,q as En,g as R,t as Nn,b as ro,v as Ur,x as fr}from"./BHMwHsqE.js";import{R as To,J as io,aM as hr,P as $n,h as ut,aq as gr,a as ko,g as o,v as Nt,M as Jr,N as Qr,O as Go,Q as yn,Y as dn,ar as ei,av as ti,S as Mn,V as ni,aN as so,aO as ao,T as Cn,aP as Ko,w as N,a4 as Fo,az as vr,ao as Oo,W as Ro,X as mr,aQ as oi,aR as vo,$ as ri,aS as kn,aT as ii,at as si,aU as ai,ay as li,aV as ci,a3 as pr,aW as di,K as ui,aX as fi,aB as hi,Z as xn,d as ue,_ as yr,f as K,aD as gi,aY as vi,aZ as mi,a2 as br,a_ as pi,a$ as yi,b0 as bi,b1 as xi,b2 as _i,U as wi,b3 as Si,b4 as Ci,b5 as Ni,b6 as Ai,a5 as Ei,p as gt,aL as jt,o as O,q as vt,s as ce,m as De,n as Ae,z as Ce,y as se,C as xr,D as Xn,A as k,B as Pt,x as b,l as je,t as Fe,k as Re,aJ as Ke,b7 as Mi,b8 as Vn,H as ki,al as Sn,ak as mo}from"./CDWPIt_c.js";import{i as mt}from"./Bt7a5Wb6.js";import{l as Dn,p as h,c as In,i as Le,b as fn,s as D,f as Pn,a as At,d as q,u as Di,g as Pi,h as Yn,_ as Tn,e as On}from"./BjAhemba.js";import{s as ze,a as Wo}from"./DDbzpnx_.js";function on(t,e){return e}function Ii(t,e,n){for(var r=t.items,i=[],a=e.length,s=0;s<a;s++)ai(e[s].e,i,!0);var l=a>0&&i.length===0&&n!==null;if(l){var c=n.parentNode;li(c),c.append(n),r.clear(),Ut(t,e[0].prev,e[a-1].next)}ci(i,()=>{for(var d=0;d<a;d++){var f=e[d];l||(r.delete(f.k),Ut(t,f.prev,f.next)),kn(f.e,!l)}})}function Ht(t,e,n,r,i,a=null){var s=t,l={flags:e,items:new Map,first:null},c=(e&hr)!==0;if(c){var d=t;s=ut?$n(gr(d)):d.appendChild(To())}ut&&ko();var f=null,g=!1,p=new Map,E=Nt(()=>{var u=n();return Oo(u)?u:u==null?[]:vr(u)}),v,m;function y(){Li(m,v,l,p,s,i,e,r,n),a!==null&&(v.length===0?f?Ro(f):f=Mn(()=>a(s)):f!==null&&mr(f,()=>{f=null}))}io(()=>{m??(m=pr),v=o(E);var u=v.length;if(g&&u===0)return;g=u===0;let L=!1;if(ut){var M=Jr(s)===Qr;M!==(u===0)&&(s=Go(),$n(s),yn(!1),L=!0)}if(ut){for(var _=null,S,A=0;A<u;A++){if(dn.nodeType===ei&&dn.data===ti){s=dn,L=!0,yn(!1);break}var z=v[A],$=r(z,A);S=Do(dn,l,_,null,z,$,A,i,e,n),l.items.set($,S),_=S}u>0&&$n(Go())}if(ut)u===0&&a&&(f=Mn(()=>a(s)));else if(ni()){var Q=new Set,ne=Cn;for(A=0;A<u;A+=1){z=v[A],$=r(z,A);var j=l.items.get($)??p.get($);j?(e&(so|ao))!==0&&_r(j,z,A,e):(S=Do(null,l,null,null,z,$,A,i,e,n,!0),p.set($,S)),Q.add($)}for(const[B,X]of l.items)Q.has(B)||ne.skipped_effects.add(X.e);ne.add_callback(y)}else y();L&&yn(!0),o(E)}),ut&&(s=dn)}function Li(t,e,n,r,i,a,s,l,c){var re,I,We,xe;var d=(s&ii)!==0,f=(s&(so|ao))!==0,g=e.length,p=n.items,E=n.first,v=E,m,y=null,u,L=[],M=[],_,S,A,z;if(d)for(z=0;z<g;z+=1)_=e[z],S=l(_,z),A=p.get(S),A!==void 0&&((re=A.a)==null||re.measure(),(u??(u=new Set)).add(A));for(z=0;z<g;z+=1){if(_=e[z],S=l(_,z),A=p.get(S),A===void 0){var $=r.get(S);if($!==void 0){r.delete(S),p.set(S,$);var Q=y?y.next:v;Ut(n,y,$),Ut(n,$,Q),po($,Q,i),y=$}else{var ne=v?v.e.nodes_start:i;y=Do(ne,n,y,y===null?n.first:y.next,_,S,z,a,s,c)}p.set(S,y),L=[],M=[],v=y.next;continue}if(f&&_r(A,_,z,s),(A.e.f&vo)!==0&&(Ro(A.e),d&&((I=A.a)==null||I.unfix(),(u??(u=new Set)).delete(A))),A!==v){if(m!==void 0&&m.has(A)){if(L.length<M.length){var j=M[0],B;y=j.prev;var X=L[0],J=L[L.length-1];for(B=0;B<L.length;B+=1)po(L[B],j,i);for(B=0;B<M.length;B+=1)m.delete(M[B]);Ut(n,X.prev,J.next),Ut(n,y,X),Ut(n,J,j),v=j,y=J,z-=1,L=[],M=[]}else m.delete(A),po(A,v,i),Ut(n,A.prev,A.next),Ut(n,A,y===null?n.first:y.next),Ut(n,y,A),y=A;continue}for(L=[],M=[];v!==null&&v.k!==S;)(v.e.f&vo)===0&&(m??(m=new Set)).add(v),M.push(v),v=v.next;if(v===null)continue;A=v}L.push(A),y=A,v=A.next}if(v!==null||m!==void 0){for(var ee=m===void 0?[]:vr(m);v!==null;)(v.e.f&vo)===0&&ee.push(v),v=v.next;var F=ee.length;if(F>0){var Y=(s&hr)!==0&&g===0?i:null;if(d){for(z=0;z<F;z+=1)(We=ee[z].a)==null||We.measure();for(z=0;z<F;z+=1)(xe=ee[z].a)==null||xe.fix()}Ii(n,ee,Y)}}d&&ri(()=>{var P;if(u!==void 0)for(A of u)(P=A.a)==null||P.apply()}),t.first=n.first&&n.first.e,t.last=y&&y.e;for(var fe of r.values())kn(fe.e);r.clear()}function _r(t,e,n,r){(r&so)!==0&&Ko(t.v,e),(r&ao)!==0?Ko(t.i,n):t.i=n}function Do(t,e,n,r,i,a,s,l,c,d,f){var g=(c&so)!==0,p=(c&oi)===0,E=g?p?N(i,!1,!1):Fo(i):i,v=(c&ao)===0?s:Fo(s),m={i:v,v:E,k:a,a:null,e:null,prev:n,next:r};try{if(t===null){var y=document.createDocumentFragment();y.append(t=To())}return m.e=Mn(()=>l(t,E,v,d),ut),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?f||(e.first=m):(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function po(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==null&&a!==r;){var s=si(a);i.before(a),a=s}}function Ut(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function zi(t,e,n,r,i,a){let s=ut;ut&&ko();var l,c,d=null;ut&&dn.nodeType===di&&(d=dn,ko());var f=ut?dn:t,g;io(()=>{const p=e()||null;var E=fi;p!==l&&(g&&(p===null?mr(g,()=>{g=null,c=null}):p===c?Ro(g):kn(g)),p&&p!==c&&(g=Mn(()=>{if(d=ut?d:document.createElementNS(E,p),hi(d,d),r){ut&&Gr(p)&&d.append(document.createComment(""));var v=ut?gr(d):d.appendChild(To());ut&&(v===null?yn(!1):$n(v)),r(d,v)}pr.nodes_end=d,f.before(d)})),l=p,l&&(c=l))},ui),s&&(yn(!0),$n(f))}function pn(t,e,n){xn(()=>{var r=ue(()=>e(t,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,a={};yr(()=>{var s=n();K(s),i&&gi(a,s)&&(a=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Ti(t,e){var n=void 0,r;io(()=>{n!==(n=e())&&(r&&(kn(r),r=null),n&&(r=Mn(()=>{xn(()=>n(t))})))})}function wr(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=wr(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Oi(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=wr(t))&&(r&&(r+=" "),r+=e);return r}function Ri(t){return typeof t=="object"?Oi(t):t??""}const Ho=[...` 	
\r\fÂ \v\uFEFF`];function Wi(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+a;(s===0||Ho.includes(r[s-1]))&&(l===r.length||Ho.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function jo(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var a=t[i];a!=null&&a!==""&&(r+=" "+i+": "+a+n)}return r}function yo(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Bi(t,e){if(e){var n="",r,i;if(Array.isArray(e)?(r=e[0],i=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,s=0,l=!1,c=[];r&&c.push(...Object.keys(r).map(yo)),i&&c.push(...Object.keys(i).map(yo));var d=0,f=-1;const m=t.length;for(var g=0;g<m;g++){var p=t[g];if(l?p==="/"&&t[g-1]==="*"&&(l=!1):a?a===p&&(a=!1):p==="/"&&t[g+1]==="*"?l=!0:p==='"'||p==="'"?a=p:p==="("?s++:p===")"&&s--,!l&&a===!1&&s===0){if(p===":"&&f===-1)f=g;else if(p===";"||g===m-1){if(f!==-1){var E=yo(t.substring(d,f).trim());if(!c.includes(E)){p!==";"&&g++;var v=t.substring(d,g).trim();n+=" "+v+";"}}d=g+1,f=-1}}}}return r&&(n+=jo(r)),i&&(n+=jo(i,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function yt(t,e,n,r,i,a){var s=t.__className;if(ut||s!==n||s===void 0){var l=Wi(n,r,a);(!ut||l!==t.getAttribute("class"))&&(l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l)),t.__className=n}else if(a&&i!==a)for(var c in a){var d=!!a[c];(i==null||d!==!!i[c])&&t.classList.toggle(c,d)}return a}function bo(t,e={},n,r){for(var i in n){var a=n[i];e[i]!==a&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,a,r))}}function ot(t,e,n,r){var i=t.__style;if(ut||i!==e){var a=Bi(e,r);(!ut||a!==t.getAttribute("style"))&&(a==null?t.removeAttribute("style"):t.style.cssText=a),t.__style=e}else r&&(Array.isArray(r)?(bo(t,n==null?void 0:n[0],r[0]),bo(t,n==null?void 0:n[1],r[1],"important")):bo(t,n,r));return r}function eo(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Oo(e))return vi();for(var r of t.options)r.selected=e.includes(Gn(r));return}for(r of t.options){var i=Gn(r);if(mi(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Sr(t){var e=new MutationObserver(()=>{eo(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),br(()=>{e.disconnect()})}function il(t,e,n=e){var r=!0;ur(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Gn);else{var l=t.querySelector(a)??t.querySelector("option:not([disabled])");s=l&&Gn(l)}n(s)}),xn(()=>{var i=e();if(eo(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Gn(a),n(i))}t.__value=i,r=!1}),Sr(t)}function Gn(t){return"__value"in t?t.__value:t.value}const Rn=Symbol("class"),Wn=Symbol("style"),Cr=Symbol("is custom element"),Nr=Symbol("is html");function Ar(t){if(ut){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;G(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;G(t,"checked",null),t.checked=i}}};t.__on_r=n,Ci(n),qr()}}function $i(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function G(t,e,n,r){var i=Er(t);ut&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[Si]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Mr(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Xi(t,e,n,r,i=!1){var a=Er(t),s=a[Cr],l=!a[Nr];let c=ut&&s;c&&yn(!1);var d=e||{},f=t.tagName==="OPTION";for(var g in e)g in n||(n[g]=null);n.class?n.class=Ri(n.class):n[Rn]&&(n.class=null),n[Wn]&&(n.style??(n.style=null));var p=Mr(t);for(const M in n){let _=n[M];if(f&&M==="value"&&_==null){t.value=t.__value="",d[M]=_;continue}if(M==="class"){var E=t.namespaceURI==="http://www.w3.org/1999/xhtml";yt(t,E,_,r,e==null?void 0:e[Rn],n[Rn]),d[M]=_,d[Rn]=n[Rn];continue}if(M==="style"){ot(t,_,e==null?void 0:e[Wn],n[Wn]),d[M]=_,d[Wn]=n[Wn];continue}var v=d[M];if(!(_===v&&!(_===void 0&&t.hasAttribute(M)))){d[M]=_;var m=M[0]+M[1];if(m!=="$$")if(m==="on"){const S={},A="$$"+M;let z=M.slice(2);var y=Zr(z);if(Kr(z)&&(z=z.slice(0,-7),S.capture=!0),!y&&v){if(_!=null)continue;t.removeEventListener(z,d[A],S),d[A]=null}if(_!=null)if(y)t[`__${z}`]=_,Hr([z]);else{let $=function(Q){d[M].call(this,Q)};d[A]=Fr(z,t,$,S)}else y&&(t[`__${z}`]=void 0)}else if(M==="style")G(t,M,_);else if(M==="autofocus")jr(t,!!_);else if(!s&&(M==="__value"||M==="value"&&_!=null))t.value=t.__value=_;else if(M==="selected"&&f)$i(t,_);else{var u=M;l||(u=Vr(u));var L=u==="defaultValue"||u==="defaultChecked";if(_==null&&!s&&!L)if(a[M]=null,u==="value"||u==="checked"){let S=t;const A=e===void 0;if(u==="value"){let z=S.defaultValue;S.removeAttribute(u),S.defaultValue=z,S.value=S.__value=A?z:null}else{let z=S.defaultChecked;S.removeAttribute(u),S.defaultChecked=z,S.checked=A?z:!1}}else t.removeAttribute(M);else L||p.includes(u)&&(s||typeof _!="string")?(t[u]=_,u in a&&(a[u]=wi)):typeof _!="function"&&G(t,u,_)}}}return c&&yn(!0),d}function Vo(t,e,n=[],r=[],i,a=!1){pi(n,r,s=>{var l=void 0,c={},d=t.nodeName==="SELECT",f=!1;if(io(()=>{var p=e(...s.map(o)),E=Xi(t,l,p,i,a);f&&d&&"value"in p&&eo(t,p.value);for(let m of Object.getOwnPropertySymbols(c))p[m]||kn(c[m]);for(let m of Object.getOwnPropertySymbols(p)){var v=p[m];m.description===xi&&(!l||v!==l[m])&&(c[m]&&kn(c[m]),c[m]=Mn(()=>Ti(t,()=>v))),E[m]=v}l=E}),d){var g=t;xn(()=>{eo(g,l.value,!0),Sr(g)})}f=!0})}function Er(t){return t.__attributes??(t.__attributes={[Cr]:t.nodeName.includes("-"),[Nr]:t.namespaceURI===yi})}var Zo=new Map;function Mr(t){var e=Zo.get(t.nodeName);if(e)return e;Zo.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=_i(r);for(var a in n)n[a].set&&e.push(a);r=bi(r)}return e}function kr(t,e,n=e){var r=Ni(),i=new WeakSet;ur(t,"input",a=>{var s=a?t.defaultValue:t.value;if(s=xo(t)?_o(s):s,n(s),Cn!==null&&i.add(Cn),r&&s!==(s=e())){var l=t.selectionStart,c=t.selectionEnd;t.value=s??"",c!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(c,t.value.length))}}),(ut&&t.defaultValue!==t.value||ue(e)==null&&t.value)&&(n(xo(t)?_o(t.value):t.value),Cn!==null&&i.add(Cn)),yr(()=>{var a=e();if(t===document.activeElement){var s=Ai??Cn;if(i.has(s))return}xo(t)&&a===_o(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function xo(t){var e=t.type;return e==="number"||e==="range"}function _o(t){return t===""?null:+t}function Bo(t,e,n){var r=Ei(t,e);r&&r.set&&(t[e]=n,br(()=>{t[e]=null}))}var un,An,Hn,no,Dr;const oo=class oo{constructor(e){zn(this,no);zn(this,un,new WeakMap);zn(this,An);zn(this,Hn);go(this,Hn,e)}observe(e,n){var r=nn(this,un).get(e)||new Set;return r.add(n),nn(this,un).set(e,r),Yo(this,no,Dr).call(this).observe(e,nn(this,Hn)),()=>{var i=nn(this,un).get(e);i.delete(n),i.size===0&&(nn(this,un).delete(e),nn(this,An).unobserve(e))}}};un=new WeakMap,An=new WeakMap,Hn=new WeakMap,no=new WeakSet,Dr=function(){return nn(this,An)??go(this,An,new ResizeObserver(e=>{for(var n of e){oo.entries.set(n.target,n);for(var r of nn(this,un).get(n.target)||[])r(n)}}))},Xo(oo,"entries",new WeakMap);let Po=oo;var Yi=new Po({box:"border-box"});function qo(t,e,n){var r=Yi.observe(t,()=>n(t[e]));xn(()=>(ue(()=>n(t[e])),r))}function Kn(t){return function(...e){var n=e[0];n.target===this&&(t==null||t.apply(this,e))}}function Qt(t){return function(...e){var n=e[0];return n.stopPropagation(),t==null?void 0:t.apply(this,e)}}function Tt(t){return function(...e){var n=e[0];return n.preventDefault(),t==null?void 0:t.apply(this,e)}}function lt(t,e){var a;var n=(a=t.$$events)==null?void 0:a[e.type],r=Oo(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,e)}const Gi="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ki=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Gi[n[t]&63];return e};const Uo=[{id:"build",name:"Build",hue:198,weight:1},{id:"research",name:"Research",hue:271,weight:1},{id:"teach",name:"Teach",hue:340,weight:.9},{id:"ops",name:"Ops",hue:45,weight:.8},{id:"people",name:"People",hue:160,weight:.7}],Fi=Array.from({length:28}).map((t,e)=>({id:Ki(6),pillarId:Uo[e%Uo.length].id,title:["Docs","Workflow","Dataset","Space","Thread"][e%5]+" "+(e+1),kind:["doc","app","data","space","thread"][e%5],activity:Math.random(),updatedAt:Date.now()-Math.floor(Math.random()*1e7)})),wo=[{id:"start-day",label:"Start Day",filter:{minActivity:.2}},{id:"ship-review",label:"Ship Review",filter:{kinds:["app","doc"]}},{id:"deep-work",label:"Deep Work",filter:{pillars:["build","research"]}}];/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ji=jt("<svg><!><!></svg>");function lo(t,e){const n=Dn(e,["children","$$slots","$$events","$$legacy"]),r=Dn(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);gt(e,!1);let i=h(e,"name",8,void 0),a=h(e,"color",8,"currentColor"),s=h(e,"size",8,24),l=h(e,"strokeWidth",8,2),c=h(e,"absoluteStrokeWidth",8,!1),d=h(e,"iconNode",24,()=>[]);const f=(...v)=>v.filter((m,y,u)=>!!m&&u.indexOf(m)===y).join(" ");mt();var g=ji();Vo(g,(v,m)=>({...Hi,...r,width:s(),height:s(),stroke:a(),"stroke-width":v,class:m}),[()=>(K(c()),K(l()),K(s()),ue(()=>c()?Number(l())*24/Number(s()):l())),()=>(K(i()),K(n),ue(()=>f("lucide-icon","lucide",i()?`lucide-${i()}`:"",n.class)))]);var p=De(g);Ht(p,1,d,on,(v,m)=>{var y=xr(()=>Xn(o(m),2));let u=()=>o(y)[0],L=()=>o(y)[1];var M=Ce(),_=se(M);zi(_,u,!0,(S,A)=>{Vo(S,()=>({...L()}))}),O(v,M)});var E=ce(p);ze(E,e,"default",{},null),Ae(g),O(t,g),vt()}function Vi(t,e){const n=Dn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];lo(t,In({name:"play"},()=>n,{get iconNode(){return r},children:(i,a)=>{var s=Ce(),l=se(s);ze(l,e,"default",{},null),O(i,s)},$$slots:{default:!0}}))}function Zi(t,e){const n=Dn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];lo(t,In({name:"search"},()=>n,{get iconNode(){return r},children:(i,a)=>{var s=Ce(),l=se(s);ze(l,e,"default",{},null),O(i,s)},$$slots:{default:!0}}))}function qi(t,e){const n=Dn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"}],["path",{d:"M20 3v4"}],["path",{d:"M22 5h-4"}],["path",{d:"M4 17v2"}],["path",{d:"M5 18H3"}]];lo(t,In({name:"sparkles"},()=>n,{get iconNode(){return r},children:(i,a)=>{var s=Ce(),l=se(s);ze(l,e,"default",{},null),O(i,s)},$$slots:{default:!0}}))}function Ui(t,e){const n=Dn(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];lo(t,In({name:"zoom-in"},()=>n,{get iconNode(){return r},children:(i,a)=>{var s=Ce(),l=se(s);ze(l,e,"default",{},null),O(i,s)},$$slots:{default:!0}}))}var Ji=je('<div class="px-4 py-8 text-center text-white/50">Nothing found.</div>'),Qi=je('<button class="flex w-full items-center px-4 py-2 text-white hover:bg-white/10 cursor-pointer text-left"><!> </button>'),es=je('<div class="fixed inset-0 z-50 bg-black/40" role="dialog" aria-modal="true" tabindex="-1"><div class="fixed left-1/2 top-24 z-50 w-[680px] -translate-x-1/2 rounded-2xl border border-white/10 bg-black/80 p-2 shadow-2xl backdrop-blur"><input class="w-full bg-transparent px-4 py-3 text-white placeholder:text-white/50 focus:outline-none"/> <div class="max-h-[50vh] overflow-auto"><!></div></div></div>');function ts(t,e){gt(e,!1);const n=N();let r=h(e,"open",12,!1),i=h(e,"onSelect",8),a=h(e,"items",24,()=>[]),s=h(e,"placeholder",8,"Search..."),l=N("");const c=p=>{p.key==="Escape"&&r(!1)};k(()=>(K(a()),o(l)),()=>{b(n,a().filter(p=>p.title.toLowerCase().includes(o(l).toLowerCase())))}),Pt(),mt();var d=Ce(),f=se(d);{var g=p=>{var E=es(),v=De(E),m=De(v);Ar(m);var y=ce(m,2),u=De(y);{var L=_=>{var S=Ji();O(_,S)},M=_=>{var S=Ce(),A=se(S);Ht(A,1,()=>o(n),on,(z,$)=>{var Q=Qi(),ne=De(Q);Ui(ne,{class:"mr-2 h-4 w-4"});var j=ce(ne);Ae(Q),Fe(()=>Fn(j,` ${o($),ue(()=>o($).title)??""}`)),Ee("click",Q,()=>{i()(o($)),r(!1)}),O(z,Q)}),O(_,S)};Le(u,_=>{o(n),ue(()=>o(n).length===0)?_(L):_(M,!1)})}Ae(y),Ae(v),Ae(E),Fe(()=>G(m,"placeholder",s())),kr(m,()=>o(l),_=>b(l,_)),Ee("keydown",m,_=>_.stopPropagation()),Ee("click",E,()=>r(!1)),Ee("keydown",E,c),O(p,E)};Le(f,p=>{r()&&p(g)})}O(t,d),vt()}function ns(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function os(){const t=()=>Math.floor(Math.random()*256),e=t(),n=t(),r=t();return`rgb(${e},${n},${r})`}const rs={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},Jo={"-":"straight","~":"bezier"},Pr={"(":")","[":"]","{":"}"},is=/[-=~]*>(?:\s*\|(.+?)\|)?/g,ss=t=>{const e=t.split(`
`),n={parentNodes:[],nodeList:{}};for(const r of e){const{parentNodes:i,childNodes:a,edge:s}=as(r);for(const l of i){n.nodeList[l.id]||n.parentNodes.push(l);for(const c of a){if(n.nodeList[l.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:d})=>d.id===l.id))throw new Error("Circular reference detected");n.nodeList[l.id].children.push({node:n.nodeList[c.id]||c,...s})}else l.children.push({node:n.nodeList[c.id]||c,...s}),n.nodeList[l.id]=l;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[l.id]||l}):(c.parents.push({node:n.nodeList[l.id]||l}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(d=>d.id!==c.id)}}}return n},as=t=>{const e=[],n=[],r=t.trim();let i="";const a=r.match(is);if(a)i=a[0];else throw new Error("Invalid edge");const[s,l]=r.split(i);for(const d of s.split("&"))e.push(Qo(d));for(const d of l.split("&"))n.push(Qo(d));const c=ls(i);return{parentNodes:e,childNodes:n,edge:c}},Qo=t=>{t=t.trim();const e=t[0],n=t.slice(1);let r="",i="";const a="Default",s={shape:""},l=[];for(let c=0;c<n.length;c++)if(cs(n[c]))l.push(n[c]);else if(Pr[l[l.length-1]]===n[c]){i=rs[l.join("")];break}else r+=n[c];return s.shape=i,s.content=r,{id:e,data:s,type:a,children:[],parents:[],depth:0,nesting:0}},ls=t=>{t=t.trim();let e="";const[n,r]=t.split("|"),i=n[0];if(i in Jo)e=Jo[i];else throw new Error("Not a valid edge type");return r?{shape:e,content:r.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:e,length:Math.floor((n.trim().length-1)/2)}};function cs(t){return t in Pr}function ds(){return Math.random().toString(36).substring(7)}function us(t,e){const n=Math.sign(t.x).toString(),r=Math.sign(t.y).toString(),i=Math.sign(e.x).toString(),a=Math.sign(e.y).toString();return`${n}${r}${i}${a}`}function fs(t,e){return{1001:`a ${t} ${t} 0 0 1 ${t} ${t}`,"0110":`a ${t} ${t} 0 0 0 ${t} ${t}`,"100-1":`a ${t} ${t} 0 0 0 ${t} -${t}`,"0-110":`a ${t} ${t} 0 0 1 ${t} -${t}`,"-1001":`a ${t} ${t} 0 0 0 -${t} ${t}`,"01-10":`a ${t} ${t} 0 0 1 -${t} ${t}`,"-100-1":`a ${t} ${t} 0 0 1 -${t} -${t}`,"0-1-10":`a ${t} ${t} 0 0 0 -${t} -${t}`}[e]||""}function er(t,e){const n=e*(Math.PI/180),r=t.x*Math.cos(n)-t.y*Math.sin(n),i=t.x*Math.sin(n)+t.y*Math.cos(n);return{x:r,y:i}}const tr=(t,e,n,r)=>t+` l ${e} ${n} `+r,Dt=x({x:0,y:0}),Io=x(0),Bt=x(!1),Lo=x(!1),Ir=Mo({x:0,y:0},t=>{const e=a=>{t({x:a.clientX,y:a.clientY})},n=a=>{if(a.touches.length===2){const s=ns(a.touches[0],a.touches[1]);Io.set(s);const l={x:a.touches[0].clientX,y:a.touches[0].clientY};t(l)}else if(a.touches.length===1){const s=a.touches[0].clientX,l=a.touches[0].clientY;t({x:s,y:l}),Bt.set(!0)}},r=a=>{n(a),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{Bt.set(!1),Io.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",e),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});var hs=je("<div><div></div></div>");function gs(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(S,"$groups",n),a=()=>D(Ir,"$cursorPositionRaw",n),s=()=>D(o(l),"$selectedNodes",n),l=N(),c=N(),d=N(),f=N(),g=N(),p=N(),E=N(),v=N(),m=N();let y=h(e,"graph",8),u=h(e,"anchor",8),L=h(e,"adding",8,!1),M=h(e,"creating",8,!1),_=h(e,"color",8,null);const{groups:S}=y();let A,z=N();en($);function $(){A=Array.from(document.querySelectorAll(".svelvet-node")).map(F=>{const{top:Y,left:fe,width:re,height:I}=F.getBoundingClientRect();return{id:F.id,top:Y,left:fe,width:re,height:I}})}function Q(){if(!A)return;const ee=A.reduce((F,Y)=>{if(o(g)+u().left<=Y.left&&o(f)+u().top<=Y.top&&o(g)+u().left+Math.abs(o(d))>=Y.left+Y.width&&o(f)+u().top+Math.abs(o(c))>=Y.top+Y.height){const fe=Y.id,re=y().nodes.get(fe);if(!re)return F;F.push(re)}return F},[]);L()?ee.forEach(F=>{s().add(F)}):q(o(l),new Set(ee)),q(o(l),s())}k(()=>i(),()=>{fn(b(l,i().selected.nodes),"$selectedNodes",n)}),k(()=>(a(),K(u())),()=>{b(c,a().y-u().y-u().top)}),k(()=>(a(),K(u())),()=>{b(d,a().x-u().x-u().left)}),k(()=>(K(u()),o(c)),()=>{b(f,Math.min(u().y,u().y+o(c)))}),k(()=>(K(u()),o(d)),()=>{b(g,Math.min(u().x,u().x+o(d)))}),k(()=>o(f),()=>{b(p,`${o(f)}px`)}),k(()=>o(g),()=>{b(E,`${o(g)}px`)}),k(()=>o(c),()=>{b(v,`${Math.abs(o(c))}px`)}),k(()=>o(d),()=>{b(m,`${Math.abs(o(d))}px`)}),k(()=>(o(d),o(c)),()=>{(o(d)||o(c))&&Q()}),Pt(),mt();var ne=hs();let j,B;var X=De(ne);let J;Pn(X,ee=>b(z,ee),()=>o(z)),Ae(ne),Fe((ee,F,Y)=>{j=yt(ne,1,"selection-border svelte-10ds4jd",null,j,ee),B=ot(ne,"",B,F),J=yt(X,1,"selection-box svelte-10ds4jd",null,J,Y)},[()=>({creating:M()}),()=>({"--prop-selection-box-color":_(),height:o(v),width:o(m),top:o(p),left:o(E)}),()=>({creating:M()})]),O(t,ne),vt(),r()}const vs=3,ms=.1,ps=10,ys=100,bs=50,xs="#000",_s="#fff",ws="12px",Ss=22,Cs=1.4,Ns=40,Bn={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var As=jt('<circle class="background-dot svelte-rryw83"></circle>'),Es=jt('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),Ms=jt('<circle class="background-dot svelte-rryw83"></circle>'),ks=jt('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),Ds=jt('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),Ps=jt('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),Is=je('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function Ls(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(A,"$translationStore",n),a=()=>D(S,"$scaleStore",n),s=N(),l=N(),c=N(),d=N(),f=N(),g=Re("graph");let p=h(e,"style",8,"dots"),E=h(e,"gridWidth",8,Ss),v=h(e,"dotSize",8,Cs),m=h(e,"bgColor",8,null),y=h(e,"dotColor",8,null),u=h(e,"opacityThreshold",8,3),L=h(e,"majorGrid",8,0),M=h(e,"minOpacity",8,.4);const _=g.transforms,S=_.scale,A=_.translation;let z=N(),$=N(),Q=N(),ne=N(),j=N(),B=N(1),X=N(1);k(()=>i(),()=>{b(s,i())}),k(()=>a(),()=>{b(l,a())}),k(()=>(o(l),K(E())),()=>{b(c,o(l)*E())}),k(()=>(o(l),K(v())),()=>{b(d,o(l)*v()/2)}),k(()=>o(c),()=>{b(f,o(c)/2)}),k(()=>(o($),o(z),o(Q),o(d),o(l),o(s),K(u()),K(M())),()=>{var W,T;b($,((W=o(z))==null?void 0:W.offsetWidth)||0),b(Q,((T=o(z))==null?void 0:T.offsetHeight)||0),b(ne,(o($)+o(d))*(1-o(l))/2+o(s).x),b(j,(o(Q)+o(d))*(1-o(l))/2+o(s).y),b(B,o(l)>u()?1:o(l)/u()+M()),b(X,o(l)>u()/3?1:o(l)/(u()/3)+M())}),Pt(),mt();var J=Is();let ee;var F=De(J),Y=De(F),fe=De(Y),re=De(fe);{var I=W=>{var T=As();let Ie;Fe(he=>{G(T,"r",o(d)),G(T,"cx",o(f)),G(T,"cy",o(f)),Ie=ot(T,"",Ie,he)},[()=>({"--calculated-dot-color":y()})]),O(W,T)},We=W=>{var T=Ce(),Ie=se(T);{var he=Z=>{var Te=Es(),ye=se(Te);G(ye,"y1",0);let be;var ge=ce(ye);G(ge,"x1",0);let _e;Fe((we,$e)=>{G(ye,"x1",o(f)),G(ye,"x2",o(f)),G(ye,"y2",o(c)),G(ye,"stroke-width",o(d)),be=ot(ye,"",be,we),G(ge,"y1",o(f)),G(ge,"y2",o(f)),G(ge,"x2",o(c)),G(ge,"stroke-width",o(d)),_e=ot(ge,"",_e,$e)},[()=>({"--calculated-dot-color":y()}),()=>({"--calculated-dot-color":y()})]),O(Z,Te)};Le(Ie,Z=>{p()==="lines"&&Z(he)},!0)}O(W,T)};Le(re,W=>{p()==="dots"?W(I):W(We,!1)})}Ae(fe);var xe=ce(fe);{var P=W=>{var T=Ds(),Ie=De(T);{var he=Te=>{var ye=Ms();let be;Fe(ge=>{G(ye,"r",o(d)*2),G(ye,"cx",o(f)),G(ye,"cy",o(f)),be=ot(ye,"",be,ge)},[()=>({"--calculated-dot-color":y()})]),O(Te,ye)},Z=Te=>{var ye=Ce(),be=se(ye);{var ge=_e=>{var we=ks(),$e=se(we);G($e,"y1",0);let ct;var Ve=ce($e);G(Ve,"x1",0);let de;Fe((H,ae)=>{G($e,"x1",o(f)),G($e,"x2",o(f)),G($e,"y2",o(c)*L()),G($e,"stroke-width",o(d)*1.2),ct=ot($e,"",ct,H),G(Ve,"y1",o(f)),G(Ve,"y2",o(f)),G(Ve,"x2",o(c)*L()),G(Ve,"stroke-width",o(d)*1.2),de=ot(Ve,"",de,ae)},[()=>({"--calculated-dot-color":y()}),()=>({"--calculated-dot-color":y()})]),O(_e,we)};Le(be,_e=>{p()==="lines"&&_e(ge)},!0)}O(Te,ye)};Le(Ie,Te=>{p()==="dots"?Te(he):Te(Z,!1)})}Ae(T),Fe(()=>{G(T,"x",o(ne)),G(T,"y",o(j)),G(T,"width",o(c)*L()),G(T,"height",o(c)*L())}),O(W,T)};Le(xe,W=>{L()>0&&W(P)})}Ae(Y);var Me=ce(Y),ke=ce(Me);{var Be=W=>{var T=Ps();Fe(()=>G(T,"opacity",o(X))),O(W,T)};Le(ke,W=>{L()>0&&W(Be)})}Ae(F),Ae(J),Pn(J,W=>b(z,W),()=>o(z)),Fe(W=>{ee=ot(J,"",ee,W),G(fe,"x",o(ne)),G(fe,"y",o(j)),G(fe,"width",o(c)),G(fe,"height",o(c)),G(Me,"opacity",o(B))},[()=>({"--calculated-background-color":m()})]),O(t,J),vt(),r()}var zs=je('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function Ts(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(f(),"$position",n),a=()=>D(E,"$width",n),s=()=>D(v,"$height",n),l=()=>D(g(),"$color",n),c=N();let d=h(e,"dimensions",8),f=h(e,"position",8),g=h(e,"color",8),p=h(e,"groupName",8);const{width:E,height:v}=d(),m=En();function y(){m("groupClick",{groupName:p()})}k(()=>K(p()),()=>{b(c,`${p()}-bounding-box`)}),Pt(),mt();var u=zs();let L;var M=De(u);let _;Ae(u),Fe((S,A)=>{G(u,"id",o(c)),L=ot(u,`border: solid 4px ${l()??""};`,L,S),_=ot(M,"",_,A)},[()=>({top:(i(),ue(()=>`${i().y}px`)),left:(i(),ue(()=>`${i().x}px`)),width:`${a()}px`,height:`${s()}px`}),()=>({"background-color":l()})]),Ee("contextmenu",u,Tt(Qt(function(S){lt.call(this,e,S)}))),Ee("mousedown",u,Tt(Qt(y))),O(t,u),vt(),r()}function Os(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(s,"$groupBoxes",n),s=Re("graph").groupBoxes;mt();var l=Ce(),c=se(l);Ht(c,1,()=>Array.from(i()),([d,f])=>d,(d,f)=>{var g=xr(()=>Xn(o(f),2));let p=()=>o(g)[0];Ts(d,In(()=>o(g)[1],{get groupName(){return p()},$$events:{groupClick(v){lt.call(this,e,v)}}}))}),O(t,l),vt(),r()}function So(t){const e=t.style.width,n=t.style.height;t.style.width="fit-content",t.style.height="fit-content";const r=t.offsetWidth,i=t.offsetHeight;return t.style.width=e,t.style.height=n,[r,i]}function Lr(t,e,n,r,i){const a={x:0,y:0},s=r.x-i.left-i.width/2,l=r.y-i.top-i.height/2,c=(s-n.x)/t,d=(l-n.y)/t;return a.x=s-c*e,a.y=l-d*e,a}function zr(t,e,n){const r=e*n,i=t-r;return Number(Math.max(ms,Math.min(vs,i)).toFixed(9))}const co=(t,e,n,r,i,a,s)=>{const{clientX:l,clientY:c}=t,d=a,f=l-n,g=c-e,p=s.x,E=s.y,v=r*(1-a)/2,m=i*(1-a)/2,y=f-p-v,u=g-E-m,L=y/d,M=u/d;return{x:L,y:M}};function Rs(t,e,n){const{top:r,left:i,width:a,height:s}=R(t),l=R(e.scale),c=R(e.translation);return{scaled:co({clientX:n.x,clientY:n.y},r,i,a,s,l,c),scale:l}}function Ws(t,e,n){const{scale:r,translation:i}=n,a=R(r),s=R(i),l=e.x-t.x,c=e.y-t.y,d=s.x+l*a,f=s.y+c*a;return{x:d,y:f}}function Bs(t,e){return t.x*e.x+t.y*e.y}function $s(t,e,n){const r=[],i=e.x-t.x,a=e.y-t.y,s=Ys(t.direction,e.direction),l=Bs(t.direction,e.direction)===0,c=Xs(t,e),d=nt(t.direction,-1,-1),f=nt(e.direction,-1,-1),g={x:Math.abs(t.direction.y),y:Math.abs(t.direction.x)},p=nt(t.direction,i-n*t.direction.x*(l?1:s?0:2),a-n*t.direction.y*(l?1:s?0:2)),E=nt(e.direction,i+n*e.direction.x*(l?1:s?0:2),a+n*e.direction.y*(l?1:s?0:2)),v=Math.sign(p.x)===-1||Math.sign(p.y)===-1,m=Math.sign(E.x)===1||Math.sign(E.y)===1,y=Math.abs(i),u=Math.abs(a),L=nt(t.direction,n,n),M=nt(f,n,n),_=nt(e.direction,n,n),S=nt(t.direction,y,u),A=nt(f,y,u),z=nt(t.direction,y/2,u/2),$=nt(f,y/2,u/2),Q=nt(g,i,a),ne=!c&&!m&&!v,j=t.x+L.x,B=t.y+L.y,X=e.x+_.x,J=e.y+_.y;if(v&&r.push(L),c&&!m&&!v)r.push(S),r.push(A);else if(s)v||r.push(nt(t.direction,n+y,n+u)),r.push(Q),m||r.push(nt(f,n+y,n+u));else if(ne)r.push(z),r.push(Q),r.push($);else if(v&&m)if(l){const ee=Math.abs(j-X),F=Math.abs(B-J);r.push(nt(e.direction,y<n*2?e.direction.x*(i+e.direction.x*n):y+n,u<n*2?e.direction.y*(a+e.direction.y*n):u+n)),r.push(nt(d,ee,F))}else{const ee=Math.abs(j-X),F=Math.abs(B-J);r.push(nt(g,i/2,a/2)),r.push(nt(e.direction,ee,F)),r.push(nt(g,i/2,a/2))}else if(v){const ee=Math.abs(j-e.x),F=Math.abs(B-e.y);r.push(nt(f,y<n*2?y-n:y/2,u<n*2?u-n:u/2)),r.push(nt(d,ee,F)),r.push(nt(f,Math.max(n,y/2),Math.max(n,u/2)))}else if(m){const ee=Math.abs(X-t.x),F=Math.abs(J-t.y);r.push(nt(t.direction,Math.max(n,y/2),Math.max(n,u/2))),r.push(nt(e.direction,ee,F)),r.push(nt(t.direction,y<n*2?y-n:y/2,u<n*2?u-n:u/2))}return m&&r.push(M),r}function Xs(t,e){const{x:n,y:r}=t.direction,{x:i,y:a}=e.direction,s=e.x-t.x,l=e.y-t.y;return n*a===i*r?!1:Math.sign(l)===Math.sign(r+a)!=(Math.sign(s)===Math.sign(n+i))}function nt(t,e,n){return{x:t.x*e,y:t.y*n}}function Ys(t,e){return t.x===e.x&&t.y===e.y}function Gs(t,e){const{width:n,height:r}=t,{top:i,left:a,right:s,bottom:l}=e,c=s-a,d=l-i;if(!c||!d)return{x:null,y:null,scale:null};const f=a+c/2,g=i+d/2,p=Math.min(n/c,r/d)*.8,E=n/2,v=r/2,m=E-f,y=v-g;return{x:m*p,y:y*p,scale:p}}const Zn=(t,e,n)=>Math.min(Math.abs(t||e)/2,n);function Co(t,e){const r=t.getTotalLength()*e;return t.getPointAtLength(r)}function to(){const t=new Map,{subscribe:e,set:n,update:r}=x(t);return{subscribe:e,set:n,update:r,add:(a,s)=>(r(l=>(l.set(s,a),l)),t),get:a=>t.get(a)||null,getAll:()=>Array.from(t.values()),delete:a=>{let s=!1;return r(l=>(l.delete(a),s=!0,l)),s},count:()=>t.size}}function Ks(t){const{id:e,inputs:n,outputs:r,resizable:i,dimensions:a,editable:s,direction:l,zIndex:c,position:d,selectionColor:f,borderWidth:g,edge:p}=t,{bgColor:E,borderColor:v,rotation:m,borderRadius:y,connections:u,textColor:L,locked:M,group:_}=t,S=to(),A=(Q="self")=>{R(S).forEach(ne=>{(Q==="self"||R(ne.direction)===Q)&&ne.recalculatePosition()})};return{id:typeof e=="string"&&e.slice(0,2)==="N-"?e:`N-${e}`,position:x({x:(d==null?void 0:d.x)||0,y:(d==null?void 0:d.y)||0}),dimensions:{width:x((a==null?void 0:a.width)||0),height:x((a==null?void 0:a.height)||(a==null?void 0:a.width))},group:x(_||null),locked:x(M||!1),inputs:x(n),outputs:x(r),recalculateAnchors:A,rotation:x(m||0),moving:x(!1),resizingWidth:x(!1),resizingHeight:x(!1),rotating:x(!1),editable:x(s||!1),resizable:x(i),anchors:S,zIndex:x(c||2),collapsed:x(!1),edge:p||null,borderRadius:x(y),bgColor:x(E||null),direction:x(l),label:x(t.label||""),borderColor:x(v||null),borderWidth:x(g),selectionColor:x(f||null),textColor:x(L||null),connections:x(u)}}function Fs(t,e){const n=[t,e].sort();return`${n[0]}+${n[1]}`}function nr(t,e,n){var l,c,d,f,g;const{source:r,target:i}=t,s={id:r.id&&i.id?Fs(r.id,i.id):"cursor",target:t.target,source:t.source,component:e,type:x((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||x(null),width:x((n==null?void 0:n.width)||0),animated:x((n==null?void 0:n.animated)||!1),rendered:x(!1),start:(n==null?void 0:n.start)||null,end:(n==null?void 0:n.end)||null};if(n!=null&&n.disconnect&&(s.disconnect=!0),n!=null&&n.label){const p={text:x(n==null?void 0:n.label.text),color:x(((l=n==null?void 0:n.label)==null?void 0:l.color)||xs),textColor:x(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||_s),fontSize:x(((d=n==null?void 0:n.label)==null?void 0:d.fontSize)||ws),dimensions:{width:x(((f=n==null?void 0:n.label.dimensions)==null?void 0:f.width)||ys),height:x(((g=n==null?void 0:n.label.dimensions)==null?void 0:g.height)||bs)},borderRadius:x((n==null?void 0:n.label.borderRadius)||ps)};s.label=p}return s}function Hs(){const t=new Map,e=new Set,{subscribe:n,set:r,update:i}=x(t),a={subscribe:n,set:r,update:i,add:(s,l)=>{if(typeof l!="string"){const c=Array.from(l),d=c[0],f=c[1];if(d.connected.update(g=>g.add(f)),f.connected.update(g=>g.add(d)),a.match(...Array.from(l)).length)return;e.forEach(g=>g(s,"connection"))}i(c=>(c.set(l,s),c))},getAll:()=>Array.from(t.values()),get:s=>t.get(s)||null,match:(...s)=>Array.from(t.keys()).filter(l=>l==="cursor"?!1:s.every(c=>c?l.has(c):!0)),fetch:(s,l)=>{const c=Array.from(t.keys()).filter(d=>d==="cursor"?!1:[s,l].every(f=>f?d.has(f):!0))[0];return t.get(c)||null},delete:s=>{if(typeof s!="string"){const c=Array.from(s),d=c[0],f=c[1];d.connected.update(g=>(g.delete(f),g)),f.connected.update(g=>(g.delete(d),g))}let l=!1;return i(c=>{const d=c.get(s);return d&&(c.delete(s),l=!0,typeof s!="string"&&e.forEach(f=>f(d,"disconnection"))),c}),l},onEdgeChange:s=>(e.add(s),()=>e.delete(s)),count:()=>t.size};return a}function js(t,e,n,r){return Nn([t,e,n,r],([a,s,l,c])=>{const d={clientX:a.x,clientY:a.y};return co(d,s.top,s.left,s.width,s.height,c,l)})}function Vs(t,e,n,r){const i=x({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),a=x({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let s,l=R(e),c=R(n),d=R(r),f=l.width/c,g=l.height/c;function p(){const{x:v,y:m}=co({clientX:l.left,clientY:l.top},l.top,l.left,l.width,l.height,c,d),y=R(a);i.set({top:Math.min(y.top,m),left:Math.min(y.left,v),right:Math.max(y.right,v+f),bottom:Math.max(y.bottom,g+m)})}function E(v=!1){let m=1/0,y=1/0,u=-1/0,L=-1/0;for(const M of t.getAll()){console.log("dentro del for, este es e node:",M);const{x:_,y:S}=R(M.position),A=R(M.dimensions.width),z=R(M.dimensions.height);y=Math.min(y,_),m=Math.min(m,S),u=Math.max(u,_+A),L=Math.max(L,S+z)}a.set({top:m,left:y,right:u,bottom:L}),p(),v&&(s=requestAnimationFrame(()=>E(v)))}return t.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),E()}),Lo.subscribe(v=>{v&&E(v),v||cancelAnimationFrame(s)}),Bt.subscribe(v=>{v&&E(v),v||cancelAnimationFrame(s)}),e.subscribe(()=>{l=R(e),f=l.width/c,g=l.height/c,p()}),n.subscribe(()=>{c=R(n),f=l.width/c,g=l.height/c,p()}),r.subscribe(()=>{d=R(r),p()}),{graphBounds:i,nodeBounds:a}}function Zs(t,e,n){const{width:r,height:i,top:a,left:s}=t,l={clientX:r/2,clientY:i/2};return co(l,a,s,r,i,n,e)}function Tr(t,e){const{zoom:n,editable:r,translation:i,direction:a,locked:s,edge:l,nodes:c}=e,d=x({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),f=x({top:0,left:0,width:0,height:0,bottom:0,right:0}),g=x(n),p=x(!1),E=to(),v=Vs(E,f,g,d),m=Nn([f,d,g],([u,L,M])=>Zs(u,L,M));return{id:t,nodes:E,edges:Hs(),transforms:{translation:d,scale:g},maxZIndex:x(2),dimensions:f,bounds:v,center:m,mounted:p,direction:a||"LR",editable:r||!1,edge:l||null,editing:x(null),cursor:js(Ir,f,d,g),locked:x(s||!1),groups:x({selected:{parent:x(null),nodes:x(new Set)},hidden:{parent:x(null),nodes:x(new Set)}}),groupBoxes:to(),activeGroup:x(null),initialNodePositions:x([])}}function qs(t,e,n,r,i,a,s,l,c,d,f,g){const{width:p,height:E}=i,{x:v,y:m}=r,y=R(e.position),u=x({x:v-y.x+p/2,y:m-y.y+E/2}),L=Nn([e.position,u],([Q,ne])=>({x:Q.x+ne.x,y:Q.y+ne.y})),M=t.transforms,_=t.dimensions,S=x(c||"self"),A=()=>{const Q=document.getElementById(n),ne=R(S),j=Bn[ne];if(!Q)return;const{x:B,y:X,width:J,height:ee}=Q.getBoundingClientRect(),F=R(u),Y=R(L),{scaled:fe,scale:re}=Rs(_,M,{x:B,y:X}),I=fe.x-Y.x,We=fe.y-Y.y;u.set({x:F.x+I+J/re/2+j.x*J/re/2,y:F.y+We+ee/re/2+j.y*ee/re/2})},z=Nn([e.moving,e.resizingWidth,e.resizingHeight,e.rotating],([Q,ne,j,B])=>Q||ne||j||B),$=Nn([e.rotation],([Q])=>Q);return{id:n,position:L,offset:u,direction:S,dynamic:x(d||!1),type:l,edge:s,moving:z,mounted:x(!1),recalculatePosition:A,connected:x(new Set),store:a||null,inputKey:f||null,edgeColor:g||x(null),rotation:$,node:e}}const No=to(),qn={width:200,height:100};function Qn(t,e){return{x:Math.round(t/qn.width)*qn.width,y:Math.round(e/qn.height)*qn.height}}const Un=10;function Or(t){const e=R(t);return Array.from(e).map(r=>R(r.position))}function or(t,e){console.log("moveNodes called");let n;const r=R(t.groups),i=R(t.activeGroup);if(console.log("Graph Groups:",r),console.log("Active Group:",i),!i)return;const a=r[i].nodes;if(!a)return;const s=R(t.initialNodePositions),{x:l,y:c}=R(Dt),d=Array.from(R(a)),f=R(t.groupBoxes);console.log("Group Boxes:",f),d.forEach(p=>p.moving.set(!0)),g();function g(){const p=R(t.cursor);let E=p.x-l,v=p.y-c;if(e){const y=Qn(E,v);E=y.x,v=y.y}const m={x:E,y:v};d.forEach((y,u)=>{const{group:L,position:M}=y,_=s[u];let S;if(i==="selected"){const A=R(L);A&&(S=f.get(A))}if(!S)Us(_,m,M);else{const A=R(y.dimensions.width),z=R(y.dimensions.height),$=Wr(S,A,z);Rr(_,m,M,$)}}),R(Bt)?n=requestAnimationFrame(g):cancelAnimationFrame(n)}}function Us(t,e,n){n.set({x:t.x+e.x,y:t.y+e.y})}function Rr(t,e,n,r){n.set({x:Math.min(Math.max(r.left,t.x+e.x),r.right),y:Math.min(Math.max(r.top,t.y+e.y),r.bottom)})}function Wr(t,e,n){const{x:r,y:i}=R(t.position);return console.log("Group Box Position:",{x:r,y:i}),{left:r+Un,right:r+R(t.dimensions.width)-e-Un,top:i+Un,bottom:i+R(t.dimensions.height)-n-Un}}function rr(t=1,e,n,r=.1){const i=R(e),{width:a,height:s,top:l,left:c}=i,d=n.scale,f=R(n.translation),g=R(d),p=zr(g,t,r),E=Lr(g,p,f,{x:a/2+c,y:s/2+l},i);d.set(p),n.translation.set(E)}var Js=je('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function Qs(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(p,"$translation",n),a=()=>D(g,"$scale",n),s=()=>D(E,"$cursor",n),l=N(),c=N(),d=Re("graph"),f=d.transforms,g=f.scale,p=f.translation,E=d.cursor;let v=h(e,"isMovable",8),m=N(),y=N(!1);function u(){q(p,Ws(R(Dt),s(),f)),b(m,requestAnimationFrame(u))}k(()=>i(),()=>{b(l,i())}),k(()=>(o(l),a()),()=>{b(c,`translate(${o(l).x}px, ${o(l).y}px) scale(${a()})`)}),k(()=>(K(v()),o(y),o(m)),()=>{v()&&!o(y)?(b(y,!0),b(m,requestAnimationFrame(u))):(!v()||!o(y))&&(b(y,!1),cancelAnimationFrame(o(m)))}),Pt(),mt();var L=Js();let M;var _=De(L);ze(_,e,"default",{},null),Ae(L),Fe(S=>M=ot(L,"",M,S),[()=>({transform:o(c)})]),Ee("contextmenu",L,Kn(Tt(function(S){lt.call(this,e,S)}))),Ee("click",L,Kn(Tt(function(S){lt.call(this,e,S)}))),Ee("touchstart",L,Kn(Tt(function(S){lt.call(this,e,S)}))),O(t,L),vt(),r()}var ea=je("<!> <!>",1);function ta(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(g,"$activeGroup",n),a=()=>D(Bt,"$tracking",n),s=()=>D(v,"$cursor",n),l=()=>D(p,"$groups",n);console.log("Componente GraphRenderer.svelte");const c=Re("graph"),d=Re("snapTo");let f=h(e,"isMovable",8);const g=c.activeGroup,p=c.groups,E=c.initialNodePositions,v=c.cursor;function m(y){q(Bt,!0);const{groupName:u}=y.detail;q(g,u),q(Dt,s()),q(E,Or(l()[u].nodes))}k(()=>(i(),a(),or),()=>{i()&&a()&&or(c,d)}),Pt(),mt(),Qs(t,{get isMovable(){return f()},children:(y,u)=>{var L=ea(),M=se(L);ze(M,e,"default",{},null);var _=ce(M,2);Os(_,{$$events:{groupClick:m}}),O(y,L)},$$slots:{default:!0}}),vt(),r()}const na=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],oa=new Set(na),ir=t=>oa.has(t);var ra=je('<input type="text"/>');function ia(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(s,"$textStore",n);let a=h(e,"placeholder",8);const s=Re("textStore");mt();var l=ra();Ar(l),Fe(()=>G(l,"placeholder",a())),Ee("keydown",l,Qt(function(c){lt.call(this,e,c)})),Ee("click",l,Qt(function(c){lt.call(this,e,c)})),Ee("mousedown",l,Qt(function(c){lt.call(this,e,c)})),kr(l,i,c=>q(s,c)),O(t,l),vt(),r()}const sa=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var aa=je("<div><!></div>"),la=je('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function ca(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(Be(),"$groups",n),a=()=>D($e,"$position",n),s=()=>D(Et,"$selectedNodes",n),l=()=>D($t,"$hiddenNodes",n),c=()=>D(bt,"$resized",n),d=()=>D(Y,"$duplicate",n),f=()=>D(T(),"$centerPoint",n),g=()=>D(ct,"$widthStore",n),p=()=>D(Ve,"$heightStore",n),E=()=>D(Dt,"$initialClickPosition",n),v=()=>D(fe,"$graphDOMElement",n),m=()=>D(Se,"$zIndex",n),y=()=>D(W(),"$maxZIndex",n),u=()=>D(ke(),"$locked",n),L=()=>D(ae,"$nodeLock",n),M=()=>D(H,"$editable",n),_=()=>D(rt,"$group",n),S=()=>D(Ot,"$rotation",n),A=()=>D(Xe,"$bgColor",n),z=()=>D(qe,"$textColor",n),$=()=>D(tn,"$borderColor",n),Q=()=>D(de,"$selectionColor",n),ne=()=>D(et,"$borderRadius",n),j=()=>D(ve,"$borderWidth",n),B=N(),X=N(),J=N(),ee=N(),F=Re("mounted"),Y=Re("duplicate"),fe=Re("graphDOMElement"),re=En();let I=h(e,"node",8),We=h(e,"isDefault",8),xe=h(e,"useDefaults",8),P=h(e,"center",8),Me=h(e,"nodeStore",8),ke=h(e,"locked",8),Be=h(e,"groups",8),W=h(e,"maxZIndex",8),T=h(e,"centerPoint",8),Ie=h(e,"cursor",8),he=h(e,"initialNodePositions",8),Z=h(e,"activeGroup",8),Te=h(e,"editing",8),ye=h(e,"dimensionsProvided",8,!1),be=h(e,"title",8);const ge=x(0),_e=x(null),we=I().id,$e=I().position,ct=I().dimensions.width,Ve=I().dimensions.height,de=I().selectionColor,H=I().editable,ae=I().locked,Se=I().zIndex,Xe=I().bgColor,et=I().borderRadius,qe=I().textColor,rt=I().group,tn=I().borderColor,ve=I().borderWidth,Ot=I().rotation,{selected:Rt,hidden:It}=i(),$t=It.nodes,Et=Rt.nodes,bt=x(!1);Ke("node",I()),Ke("anchorsMounted",ge),Ke("resized",bt),Ke("nodeConnectEvent",_e),en(()=>{if(P()){const Oe={x:f().x-g()/2,y:f().y-p()/2};I().position.set(Oe),Bt.set(!0),Bt.set(!1)}F.update(Oe=>Oe+1)}),ro(()=>{o(X)&&(s().delete(I()),q(Et,s())),F.update(Oe=>Oe-1)});function Vt(){o(X)?(I()&&s().delete(I()),q(Et,s())):(I()&&s().add(I()),q(Et,s()))}function Ye(Oe){q(Dt,R(Ie())),v().focus(),m()!==y()&&m()!==1/0&&q(Se,Di(W(),y()));const Ue=Oe.target;if(!sa.has(Ue.tagName)&&(Oe.preventDefault(),re("nodeClicked",{node:I(),e:Oe}),!(u()||L()))){if("touches"in Oe){if(Oe.touches&&Oe.touches.length>1)return}else Oe.button===2&&M()&&q(Te(),I());q(Bt,!0),Ze(Oe)}}function Ze(Oe){let Ue,Mt,St=!1;const tt=_();tt&&(Ue=i()[tt],Mt=R(Ue.parent),St=Mt===I()),St?q(Z(),tt):q(Z(),"selected"),!Oe.shiftKey&&o(X)?q(Z(),"selected"):(!Oe.shiftKey&&!o(X)&&!Oe.shiftKey&&(s().clear(),q(Et,s())),Vt()),q(he(),Or(i().selected.nodes))}function Zt(){Me().delete(we)}function Xt(Oe){const Ue=R(Ie()),Mt=Ue.x-E().x,St=Ue.y-E().y;Math.abs(Mt)+Math.abs(St)<4&&re("nodeReleased",{e:Oe,node:I()}),q(_e,Oe)}function Wt(Oe){return Oe.addEventListener("mousedown",Ye),Oe.addEventListener("touchstart",Ye),{destroy(){Oe.removeEventListener("mousedown",Ye),Oe.removeEventListener("touchstart",Ye)}}}k(()=>a(),()=>{b(B,a())}),k(()=>(s(),K(I())),()=>{b(X,s().has(I()))}),k(()=>(l(),K(I())),()=>{b(J,l().has(I()))}),k(()=>(K(ye()),c()),()=>{b(ee,ye()||c())}),k(()=>(o(X),d(),K(I())),()=>{o(X)&&d()&&re("duplicate",I())}),Pt(),mt();var Yt=Ce(),rn=se(Yt);{var hn=Oe=>{var Ue=la();let Mt;G(Ue,"tabindex",0);let St;var tt=De(Ue);{var sn=me=>{var Pe=aa();ot(Pe,"",{},{width:"fit-content",height:"fit-content"});var He=De(Pe);ze(He,e,"default",{grabHandle:Wt,get selected(){return o(X)},destroy:Zt},null),Ae(Pe),qo(Pe,"clientHeight",Je=>q(Ve,Je)),qo(Pe,"clientWidth",Je=>q(ct,Je)),O(me,Pe)},gn=me=>{var Pe=Ce(),He=se(Pe);ze(He,e,"default",{grabHandle:Wt,get selected(){return o(X)},destroy:Zt},null),O(me,Pe)};Le(tt,me=>{o(ee)?me(gn,!1):me(sn)})}var ht=ce(tt,2),Gt=De(ht);ze(Gt,e,"anchorWest",{},null),Ae(ht);var xt=ce(ht,2),Lt=De(xt);ze(Lt,e,"anchorEast",{},null),Ae(xt);var w=ce(xt,2),V=De(w);ze(V,e,"anchorNorth",{},null),Ae(w);var te=ce(w,2),ie=De(te);ze(ie,e,"anchorSouth",{},null),Ae(te),Ae(Ue),xn(()=>Ee("contextmenu",Ue,Tt(Qt(function(me){lt.call(this,e,me)})))),xn(()=>Ee("mouseup",Ue,Xt)),pn(Ue,me=>Wt==null?void 0:Wt(me)),Fe((me,Pe)=>{G(Ue,"id",we),Mt=yt(Ue,1,"svelvet-node svelte-1iknrz0",null,Mt,me),G(Ue,"title",be()),St=ot(Ue,"",St,Pe),G(ht,"id",(K(I()),ue(()=>`anchors-west-${I().id}`))),G(xt,"id",(K(I()),ue(()=>`anchors-east-${I().id}`))),G(w,"id",(K(I()),ue(()=>`anchors-north-${I().id}`))),G(te,"id",(K(I()),ue(()=>`anchors-south-${I().id}`)))},[()=>({selected:o(X),locked:u()||L()}),()=>({top:`${o(B),ue(()=>o(B).y)??""}px`,left:`${o(B),ue(()=>o(B).x)??""}px`,"z-index":m(),width:o(ee)?g()+"px":"fit-content",height:o(ee)?p()+"px":"fit-content",transform:`rotate(${S()??""}deg)`,"--prop-background-color":A()||(We()||xe()?null:"transparent"),"--prop-text-color":z(),"--prop-border-color":$(),"--prop-selection-color":Q(),"--prop-border-radius":ne()?`${ne()}px`:We()||xe()?null:"0px","--prop-border-width":j()||(We()||xe()?null:"0px")})]),O(Oe,Ue)};Le(rn,Oe=>{o(J)||Oe(hn)})}O(t,Yt),vt(),r()}var da=je("<div></div> <div></div>",1),ua=je("<div></div> <div></div>",1),fa=je("<div></div>"),ha=je("<div></div>"),ga=je("<!> <!> <!> <!>",1);function va(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(Y,"$position",n),a=()=>D(P,"$widthStore",n),s=()=>D(xe,"$heightStore",n),l=()=>D(re,"$resizingHeight",n),c=()=>D(Me,"$cursor",n),d=()=>D(We,"$nodeRotation",n),f=()=>D(fe,"$resizingWidth",n),g=()=>D(I,"$rotating",n),p=()=>D(Dt,"$initialClickPosition",n),E=N(),v=N(),m=N(),y=Re("graph"),u=Re("node"),L=Re("resized");let M=h(e,"width",8,!1),_=h(e,"height",8,!1),S=h(e,"rotation",8,!1),A=h(e,"minHeight",12,0),z=h(e,"minWidth",12,0),$,Q=M(),ne=M(),j=_(),B=_(),X=M()&&_(),J=0,ee=0,F=N(R(u.position));const Y=u.position,fe=u.resizingWidth,re=u.resizingHeight,I=u.rotating,We=u.rotation,xe=u.dimensions.height,P=u.dimensions.width,Me=y.cursor;let ke=N(),Be=N(),W=N(1);en(()=>{try{$=document.querySelector(`#${u.id}`),$&&(de=>{var H=Xn(de,2);z(H[0]),A(H[1])})(So($))}catch(de){console.error(de)}});function T(de,H){const ae=Xe=>{Xe.stopPropagation(),Xe.preventDefault(),H.left||H.top?b(W,-1):b(W,1),Lo.set(!0),q(Dt,R(Me)),b(ke,a()),b(Be,s()),b(F,i()),H.both?q(fe,!0):q(fe,!1),q(fe,H.left||H.right||H.both||!1),q(re,H.top||H.bottom||H.both||!1),$&&(et=>{var qe=Xn(et,2);z(qe[0]),A(qe[1])})(So($)),window.addEventListener("mouseup",Se)},Se=()=>{q(fe,!1),q(re,!1),Lo.set(!1),window.removeEventListener("mouseup",Se)};return de.addEventListener("mousedown",ae),{destroy(){de.removeEventListener("mousedown",ae)}}}function Ie(de){const H=Se=>{Se.stopPropagation(),Se.preventDefault(),J=d(),q(Dt,R(Me));const Xe=p().x-o(m).x,et=p().y-o(m).y;ee=Math.atan2(et,Xe),q(I,!0),window.addEventListener("mouseup",ae)},ae=()=>{q(I,!1),window.removeEventListener("mouseup",ae)};return de.addEventListener("mousedown",H),{destroy(){de.removeEventListener("mousedown",H)}}}function he(){const de=R(Me),H=de.x-o(m).x,ae=de.y-o(m).y,Se=Math.atan2(ae,H),Xe=ee-Se;return J-Z(Xe)}function Z(de){return de*(180/Math.PI)}Ur(()=>{$&&(de=>{var H=Xn(de,2);z(H[0]),A(H[1])})(So($)),a()<z()&&L.set(!1),s()<A()&&L.set(!1)}),k(()=>(g(),c()),()=>{g()&&(c(),q(We,he()))}),k(()=>(l(),c(),K(A()),o(Be),o(W),o(F),d()),()=>{if(l()){const de=R(Dt),H=c(),ae=Math.max(A(),o(Be)+(H.y-de.y)*o(W));ae>A()?(L.set(!0),q(xe,ae)):L.set(!1),o(W)===-1&&q(Y,{x:o(F).x,y:o(F).y+H.y-de.y}),d()!==0&&u.position.update(Se=>({y:o(F).y-(ae-o(Be))/2,x:Se.x}))}}),k(()=>(f(),c(),K(z()),o(ke),o(W),o(F),d()),()=>{if(f()){const de=R(Dt),H=c(),ae=Math.max(z(),o(ke)+(H.x-de.x)*o(W));ae>z()?(L.set(!0),q(P,ae)):L.set(!1),o(W)===-1&&q(Y,{x:o(F).x+H.x-de.x,y:o(F).y}),d()!==0&&u.position.update(Se=>({x:o(F).x-(ae-o(ke))/2,y:Se.y}))}}),k(()=>i(),()=>{b(E,i().x)}),k(()=>i(),()=>{b(v,i().y)}),k(()=>(o(E),a(),o(v),s()),()=>{b(m,{x:o(E)+a()/2,y:o(v)+s()/2})}),Pt(),mt();var Te=ga(),ye=se(Te);{var be=de=>{var H=da(),ae=se(H);let Se;pn(ae,(qe,rt)=>T==null?void 0:T(qe,rt),()=>({left:Q}));var Xe=ce(ae,2);let et;pn(Xe,(qe,rt)=>T==null?void 0:T(qe,rt),()=>({right:ne})),Fe((qe,rt)=>{Se=yt(ae,1,"left svelte-1ryxg7v",null,Se,qe),et=yt(Xe,1,"right svelte-1ryxg7v",null,et,rt)},[()=>({width:M()}),()=>({width:M()})]),O(de,H)};Le(ye,de=>{M()&&de(be)})}var ge=ce(ye,2);{var _e=de=>{var H=ua(),ae=se(H);let Se;pn(ae,(qe,rt)=>T==null?void 0:T(qe,rt),()=>({top:j}));var Xe=ce(ae,2);let et;pn(Xe,(qe,rt)=>T==null?void 0:T(qe,rt),()=>({bottom:B})),Fe((qe,rt)=>{Se=yt(ae,1,"top svelte-1ryxg7v",null,Se,qe),et=yt(Xe,1,"bottom svelte-1ryxg7v",null,et,rt)},[()=>({height:_()}),()=>({height:_()})]),O(de,H)};Le(ge,de=>{_()&&de(_e)})}var we=ce(ge,2);{var $e=de=>{var H=fa();let ae;pn(H,(Se,Xe)=>T==null?void 0:T(Se,Xe),()=>({both:X})),Fe(Se=>ae=yt(H,1,"svelte-1ryxg7v",null,ae,Se),[()=>({both:X})]),O(de,H)};Le(we,de=>{X&&de($e)})}var ct=ce(we,2);{var Ve=de=>{var H=ha();let ae;pn(H,Se=>Ie==null?void 0:Ie(Se)),Fe(Se=>ae=yt(H,1,"svelte-1ryxg7v",null,ae,Se),[()=>({rotation:S()})]),O(de,H)};Le(ct,de=>{S()&&de(Ve)})}O(t,Te),vt(),r()}var ma=je("<div></div>");function pa(t,e){let n=h(e,"output",8),r=h(e,"input",8),i=h(e,"connecting",8),a=h(e,"connected",8),s=h(e,"hovering",8),l=h(e,"bgColor",8);var c=ma();let d,f;Fe((g,p)=>{d=yt(c,1,"svelvet-anchor svelte-19t6skv",null,d,g),f=ot(c,"",f,p)},[()=>({output:n(),input:r(),connected:a(),connecting:i(),hovering:s()}),()=>({"--prop-anchor-color":l()})]),O(t,c)}let Ao;function ya(t){const e=t.parentNode;if(!e)return;e.removeChild(t);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(t)}var ba=jt('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-1bk3hhk" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-1bk3hhk" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),xa=jt("<path></path>"),_a=je('<div class="default-label svelte-1bk3hhk"> </div>'),wa=jt('<foreignObject width="100%" height="100%" class="svelte-1bk3hhk"><span class="label-wrapper svelte-1bk3hhk"><!></span></foreignObject>'),Sa=jt('<svg class="edges-wrapper svelte-1bk3hhk"><!><path role="presentation"></path><!><!></svg>');function sr(t,e){var Kt,ln;const n=Wo(e);gt(e,!1);const[r,i]=At(),a=()=>D(Oe,"$sourceDynamic",r),s=()=>D(Ue,"$targetDynamic",r),l=()=>D(o(z),"$edgeColor",r),c=()=>D(o($),"$edgeLabel",r),d=()=>D(rn,"$sourcePositionStore",r),f=()=>D(hn,"$targetPositionStore",r),g=()=>D(tt,"$sourceNodePositionStore",r),p=()=>D(sn,"$targetNodePositionStore",r),E=()=>D(Zt,"$sourceDirection",r),v=()=>D(Wt,"$sourceRotation",r),m=()=>D(Xt,"$targetDirection",r),y=()=>D(Yt,"$targetRotation",r),u=()=>D(gn,"$edgeType",r),L=()=>D(Mt,"$sourceMoving",r),M=()=>D(St,"$targetMoving",r),_=()=>D(o(ye),"$sourceZIndex",r),S=()=>D(o(be),"$targetZIndex",r),A=N(),z=N(),$=N(),Q=N(),ne=N(),j=N(),B=N(),X=N(),J=N(),ee=N(),F=N(),Y=N(),fe=N(),re=N(),I=N(),We=N(),xe=N(),P=N(),Me=N(),ke=N(),Be=N(),W=N(),T=N(),Ie=N(),he=N(),Z=N(),Te=N(),ye=N(),be=N(),ge=N(),_e=N(),we=Re("edgeStore"),$e=Re("edgeStyle"),ct=Re("endStyles"),Ve=Re("raiseEdgesOnSelect"),de=Re("edgesAboveNode");let H=h(e,"edge",24,()=>Re("edge")),ae=h(e,"straight",8,$e==="straight"),Se=h(e,"step",8,$e==="step"),Xe=h(e,"start",24,()=>ct[0]),et=h(e,"end",24,()=>ct[1]),qe=h(e,"animate",8,!1),rt=h(e,"label",8,""),tn=h(e,"enableHover",8,!1),ve=h(e,"edgeClick",8,null),Ot=h(e,"labelPosition",8,.5),Rt=h(e,"width",8,null),It=h(e,"color",8,null),$t=h(e,"labelColor",8,null),Et=h(e,"textColor",8,null),bt=h(e,"cornerRadius",8,8),Vt=h(e,"targetColor",8,null);const Ye=H().source,Ze=H().target,Zt=Ye.direction,Xt=Ze.direction,Wt=Ye.rotation,Yt=Ze.rotation,rn=Ye.position,hn=Ze.position,Oe=Ye.dynamic,Ue=Ze.dynamic,Mt=Ye.moving,St=Ze.moving,tt=(Kt=Ye.node)==null?void 0:Kt.position,sn=(ln=Ze.node)==null?void 0:ln.position,gn=H().type,ht=H().id;let Gt=N(),xt=N(),Lt=N({x:0,y:0}),w=N(!1),V=N(!1),te=N(!1),ie=N(!1),me=N(!1),Pe=N();H().rendered.set(!0),en(()=>{setTimeout(()=>{o(xt)&&b(Lt,Co(o(xt),Ot()))},0),ya(o(Pe))}),fr(()=>{o(xt)&&b(Lt,Co(o(xt),Ot()))}),ro(()=>{o(Pe).remove(),cancelAnimationFrame(Ao)});function He(){o(w)&&(o(xt)&&b(Lt,Co(o(xt),Ot())),Ao=requestAnimationFrame(He))}function Je(){if(Ye.id===null||Ze.id===null)return;const dt=we.match(Ye,Ze);we.delete(dt[0]),Ye==null||Ye.connected.update(Qe=>(Ze&&Qe.delete(Ze),Qe)),Ze==null||Ze.connected.update(Qe=>(Ye&&Qe.delete(Ye),Qe))}k(()=>(a(),s()),()=>{b(A,a()||s())}),k(()=>{},()=>{fn(b(z,(Ye==null?void 0:Ye.edgeColor)||(Ze==null?void 0:Ze.edgeColor)||null),"$edgeColor",r)}),k(()=>K(H()),()=>{var dt;fn(b($,(dt=H().label)==null?void 0:dt.text),"$edgeLabel",r)}),k(()=>(K(It()),l()),()=>{b(Q,It()||l()||null)}),k(()=>(K(rt()),c()),()=>{b(ne,rt()||c()||"")}),k(()=>o(ne),()=>{b(j,o(ne)||n.label)}),k(()=>d(),()=>{b(B,d())}),k(()=>f(),()=>{b(X,f())}),k(()=>g(),()=>{b(J,g())}),k(()=>p(),()=>{b(ee,p())}),k(()=>o(B),()=>{b(F,o(B).x)}),k(()=>o(B),()=>{b(Y,o(B).y)}),k(()=>o(X),()=>{b(fe,o(X).x)}),k(()=>o(X),()=>{b(re,o(X).y)}),k(()=>(o(fe),o(F)),()=>{b(I,o(fe)-o(F))}),k(()=>(o(re),o(Y)),()=>{b(We,o(re)-o(Y))}),k(()=>o(I),()=>{b(xe,Math.abs(o(I)))}),k(()=>o(We),()=>{b(P,Math.abs(o(We)))}),k(()=>o(xe),()=>{b(Me,Math.max(30,Math.min(600,o(xe)/2)))}),k(()=>o(P),()=>{b(ke,Math.max(30,Math.min(600,o(P)/2)))}),k(()=>(o(A),o(ee),o(J),o(te),o(ie),R),()=>{if(o(A)&&Ye.node&&Ze.node){const dt=o(ee).x-o(J).x,Qe=o(ee).y-o(J).y;b(te,Qe>0),b(ie,dt>0);let st,zt;if(o(te)){const pt=R(Ye.node.dimensions.height),Ne=o(J).y+pt;st=o(ee).y-Ne}else{const pt=R(Ze.node.dimensions.height),Ne=o(ee).y+pt;st=o(J).y-Ne}if(o(ie)){const pt=R(Ye.node.dimensions.width),Ne=o(J).x+pt;zt=o(ee).x-Ne}else{const pt=R(Ze.node.dimensions.width),Ne=o(ee).x+pt;zt=o(J).x-Ne}b(V,st>zt)}}),k(()=>(o(A),o(V),o(te),o(ie),a(),s()),()=>{if(o(A)){let dt,Qe;o(V)?(dt=o(te)?"south":"north",Qe=o(te)?"north":"south"):(dt=o(ie)?"east":"west",Qe=o(ie)?"west":"east"),a()&&q(Zt,dt),s()&&q(Xt,Qe)}}),k(()=>(E(),v()),()=>{b(Be,er(Bn[E()],v()||0))}),k(()=>(m(),y()),()=>{b(W,er(Bn[m()],y()||0))}),k(()=>(o(F),o(Be),o(Me)),()=>{b(T,o(F)+o(Be).x*o(Me))}),k(()=>(o(Y),o(Be),o(ke)),()=>{b(Ie,o(Y)+o(Be).y*o(ke))}),k(()=>(o(fe),o(W),o(Me)),()=>{b(he,o(fe)+o(W).x*o(Me))}),k(()=>(o(re),o(W),o(ke)),()=>{b(Z,o(re)+o(W).y*o(ke))}),k(()=>(o(T),o(Ie),o(he),o(Z)),()=>{b(Te,`C ${o(T)}, ${o(Ie)} ${o(he)}, ${o(Z)}`)}),k(()=>(K(Se()),u(),o(F),o(Y),K(ae()),o(Te),o(fe),o(re)),()=>{(!Se()||ht==="cursor"||u()==="bezier")&&b(Gt,`M ${o(F)}, ${o(Y)} ${ae()?"":o(Te)} ${o(fe)}, ${o(re)}`)}),k(()=>(o(j),o(w),L(),M()),()=>{o(j)&&!o(w)&&(L()||M()||ht==="cursor")?(b(w,!0),He()):o(w)&&!L()&&!M()&&ht!=="cursor"&&(b(w,!1),cancelAnimationFrame(Ao))}),k(()=>(K(Se()),u(),o(F),o(Y),E(),o(fe),o(re),m(),K(bt()),tr),()=>{if(Se()&&ht!=="cursor"&&!(u()&&u()==="bezier")){const dt={x:o(F),y:o(Y),direction:Bn[E()]},Qe={x:o(fe),y:o(re),direction:Bn[m()]},st=$s(dt,Qe,Ns),zt=(pt,Ne,Ft)=>{if(Ne<st.length-1){const cn=us(pt,st[Ne+1]);return fs(Ft,cn)}return""};b(Gt,st.reduce((pt,Ne,Ft)=>{const cn=Math.sign(Ne.x),wn=Math.sign(Ne.y);let C=Ne.x,U=Ne.y,le="";if(bt()){const oe=st[Ft+1]||{x:0,y:0},pe=st[Ft-1]||{x:0,y:0},Ge=Zn(Ne.x,oe.x,bt()),at=Zn(oe.y,Ne.y,bt()),ft=Zn(pe.x,Ne.x,bt()),_t=Zn(pe.y,Ne.y,bt()),kt=Math.min(ft,_t),wt=Math.min(Ge,at);Ne.x?C=Ne.x-(wt+kt)*cn:U=Ne.y-(wt+kt)*wn,le=zt(Ne,Ft,wt)}return tr(pt,C,U,le)},`M ${o(F)}, ${o(Y)}`))}}),k(()=>{},()=>{fn(b(ye,Ye.node.zIndex||0),"$sourceZIndex",r)}),k(()=>{},()=>{fn(b(be,Ze.node.zIndex||0),"$targetZIndex",r)}),k(()=>(_(),S()),()=>{b(ge,Math.max(_(),S()))}),k(()=>(o(ge),_(),S()),()=>{b(_e,de==="all"?1e5:de?o(ge):Ve===!0?o(ge)-1:Ve==="source"?_()-1:Ve==="target"?S()-1:0)}),Pt(),mt();var it=Ce(),Ct=se(it);{var an=dt=>{var Qe=Sa();let st;var zt=De(Qe);{var pt=le=>{var oe=ba(),pe=De(oe),Ge=De(pe);let at;Ae(pe);var ft=ce(pe),_t=De(ft);let kt;Ae(ft),Ae(oe),Fe((wt,qt)=>{G(pe,"id",ht+"-end-arrow"),at=ot(Ge,"",at,wt),G(ft,"id",ht+"-start-arrow"),kt=ot(_t,"",kt,qt)},[()=>({"--prop-edge-color":o(Q)}),()=>({"--prop-edge-color":o(Q)})]),O(le,oe)};Le(zt,le=>{(Xe()||et())&&le(pt)})}var Ne=ce(zt);let Ft,cn;Pn(Ne,le=>b(xt,le),()=>o(xt));var wn=ce(Ne);ze(wn,e,"default",{get path(){return o(Gt)},destroy:Je,get hovering(){return o(me)}},le=>{var oe=xa();let pe,Ge;Fe((at,ft)=>{G(oe,"id",ht),pe=yt(oe,0,"edge svelte-1bk3hhk",null,pe,at),G(oe,"d",o(Gt)),G(oe,"marker-end",et()==="arrow"?`url(#${ht+"-end-arrow"})`:""),G(oe,"marker-start",Xe()==="arrow"?`url(#${ht+"-start-arrow"})`:""),Ge=ot(oe,"",Ge,ft)},[()=>({animate:qe()}),()=>({"--prop-edge-color":o(Q),"--prop-stroke-width":Rt()?Rt()+"px":null})]),O(le,oe)});var C=ce(wn);{var U=le=>{var oe=wa(),pe=De(oe),Ge=De(pe);ze(Ge,e,"label",{destroy:Je,get hovering(){return o(me)}},at=>{var ft=_a();let _t;var kt=De(ft,!0);Ae(ft),Fe(wt=>{_t=ot(ft,"",_t,wt),Fn(kt,o(ne))},[()=>({"--prop-label-color":$t(),"--prop-label-text-color":Et()})]),O(at,ft)}),Ae(pe),Ae(oe),Fe(()=>{G(oe,"x",(o(Lt),ue(()=>o(Lt).x))),G(oe,"y",(o(Lt),ue(()=>o(Lt).y)))}),O(le,oe)};Le(C,le=>{o(j)&&le(U)})}Ae(Qe),Pn(Qe,le=>b(Pe,le),()=>o(Pe)),Fe((le,oe,pe)=>{st=ot(Qe,"",st,le),G(Ne,"id",ht+"-target"),Ft=yt(Ne,0,"target svelte-1bk3hhk",null,Ft,oe),G(Ne,"d",o(Gt)),cn=ot(Ne,"",cn,pe)},[()=>({"z-index":o(_e)}),()=>({cursor:ht==="cursor"||!ve()&&!tn()}),()=>({cursor:ve()||o(me)?"pointer":"move","--prop-target-edge-color":ve()||o(me)?Vt()||null:"transparent"})]),Ee("mousedown",Ne,function(...le){var oe;(oe=ve())==null||oe.apply(this,le)}),Ee("mouseenter",Ne,()=>b(me,!0)),Ee("mouseleave",Ne,()=>b(me,!1)),O(dt,Qe)};Le(Ct,dt=>{Ye&&Ze&&dt(an)})}O(t,it),Bo(e,"destroy",Je);var _n=vt({destroy:Je});return i(),_n}function ar(t,e){gt(e,!1);let n=h(e,"edge",8);Ke("edge",n()),mt();var r=Ce(),i=se(r);ze(i,e,"default",{},null),O(t,r),vt()}let Eo;const Jt=x(null);function Ca(t,e,n){if(e==="self")return;const r=t.parentNode;if(!r)return;r.removeChild(t);const i=document.querySelector(`#anchors-${e}-${n.id}`);i&&(i.appendChild(t),t&&n.recalculateAnchors())}var Na=je('<div role="button" tabindex="0"><!></div> <!> <!>',1);function Jn(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(Jt,"$connectingFrom",n),a=()=>D(rt,"$nodeLevelConnections",n),s=()=>D(X,"$anchorsMounted",n),l=()=>D(o(L),"$dynamicDirection",n),c=()=>D($,"$mounted",n),d=()=>D(B,"$nodeConnectEvent",n),f=()=>D(Se,"$anchors",n),g=()=>D(o(u),"$connectedAnchors",n),p=()=>D(Xe,"$resizingWidth",n),E=()=>D(et,"$resizingHeight",n),v=()=>D(qe,"$rotating",n),m=()=>D(xe(),"$inputsStore",n),y=N(),u=N(),L=N(),M=Re("dynamic"),_=Re("node"),S=Re("edgeStore"),A=Re("cursorAnchor"),z=Re("direction"),$=Re("mounted"),Q=Re("graph"),ne=Re("nodeStore"),j=Re("graphEdge"),B=Re("nodeConnectEvent"),X=Re("anchorsMounted"),J=Re("flowchart")||void 0;let ee=h(e,"bgColor",8,null),F=h(e,"id",8,0),Y=h(e,"input",8,!1),fe=h(e,"output",8,!1),re=h(e,"multiple",24,()=>fe()?!0:!Y()),I=h(e,"dynamic",8,M||!1),We=h(e,"edge",8,null),xe=h(e,"inputsStore",8,null),P=h(e,"key",8,null),Me=h(e,"outputStore",8,null),ke=h(e,"connections",28,()=>[]),Be=h(e,"edgeColor",24,()=>x(null)),W=h(e,"edgeLabel",8,""),T=h(e,"locked",8,!1),Ie=h(e,"nodeConnect",8,!1),he=h(e,"edgeStyle",8,null),Z=h(e,"endStyles",24,()=>[null,null]),Te=h(e,"invisible",8,!1),ye=h(e,"direction",24,()=>z==="TD"?Y()?"north":"south":Y()?"west":"east"),be=h(e,"title",8,"");const ge=En(),_e=En();let we=N(),$e=N(!1),ct=N(!1),Ve=N(0),de=Y()===fe()?null:Y()?"input":"output",H=N([]);const ae=_.edge,Se=_.anchors,Xe=_.resizingWidth,et=_.resizingHeight,qe=_.rotating,rt=_.connections,tn=`A-${F()||Se.count()+1}/${_.id}`,ve=qs(Q,_,tn,{x:0,y:0},{width:0,height:0},xe()||Me()||null,We()||ae||j||null,de,ye(),I(),P(),Be());Se.add(ve,ve.id),en(()=>{var V;o(we)&&ve.recalculatePosition();const w=Array.from(R(_.anchors)).reduce((te,[,ie])=>(ie.type==="output"&&te++,te),0);if((V=a())!=null&&V.length&&!Y()){const te=[];let ie=null;a().forEach((me,Pe)=>{me&&(ie===null&&(ie=Pe),(Pe-ie)%w===0?(o(H).push(me),te.push(null)):te.push(me))}),q(rt,te)}Pi(X,s())}),fr(()=>{o(we)&&ve.recalculatePosition()}),ro(()=>{Yt(),cancelAnimationFrame(Eo)});function Ot(w){var Je;S.delete("cursor");const V={x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY},te=document.elementFromPoint(V.x,V.y);if(!te)return;const ie=te.parentElement;if(!ie)return;const me=ie.id,Pe=me.split("/")[1],He=(Je=ne.get(Pe))==null?void 0:Je.anchors.get(me);He&&(S.delete("cursor"),Rt(ve,He,w))}function Rt(w,V,te){const ie=Ye(w,V);ie&&Ze(),te.shiftKey||Xt(ie)}function It(w){var V;if("changedTouches"in w&&o(y)){Ot(w);return}if(!o(y)){if((V=g())!=null&&V.size&&!re()){S.delete("cursor"),w.shiftKey||Xt(!1);return}i()&&Vt(w)}}function $t(w){var V;if(!T()){if((V=g())!=null&&V.size&&!re()&&!i())return rn();if(!i())return Et();Vt(w)}}function Et(){Y()===fe()?(q(Jt,{anchor:ve,store:null,key:null}),bt(ve,A)):Y()?(q(Jt,{anchor:ve,store:xe(),key:P()}),bt(A,ve)):fe()&&(q(Jt,{anchor:ve,store:Me(),key:null}),bt(ve,A))}function bt(w,V,te=!1){const ie={color:Be(),label:{text:W()}};te&&(ie.disconnect=!0),he()&&(ie.type=he()),Z()[0]&&(ie.start=Z()[0]),Z()[1]&&(ie.start=Z()[1]);const me=nr({source:w,target:V},(w==null?void 0:w.edge)||null,ie);S.add(me,"cursor")}function Vt(w){if(S.delete("cursor"),!i())return;const V=i().anchor.type;if(i().anchor===ve||V===ve.type&&V){Xt(!1);return}ve.recalculatePosition();let te,ie;Y()===fe()?V==="input"?(te=ve,ie=i().anchor):(te=i().anchor,ie=ve):Y()?(te=i().anchor,ie=ve):(te=ve,ie=i().anchor),Rt(te,ie,w)}function Ye(w,V){if(w===V||R(w.connected).has(ve))return!1;const te={color:Be(),label:{text:W()}};if(J){const me=w.node.id.slice(2),Pe=J.nodeList[me];if(Pe){const He=V.node.id.slice(2),Je=Pe.children.filter(it=>it.node.id===He)[0];if(Je){const it=Je;te.label={text:it.content}}}}he()&&(te.type=he()),Z()[0]&&(te.start=Z()[0]),Z()[1]&&(te.start=Z()[1]);const ie=nr({source:w,target:V},(w==null?void 0:w.edge)||null,te);return!w.node||!V.node?!1:(S.add(ie,new Set([w,V,w.node,V.node])),!0)}function Ze(){if(Y()&&i()&&i().store)m()&&P()&&xe()&&typeof xe().set=="function"&&typeof xe().update=="function"&&Yn(xe(),ue(m)[P()]=i().store,ue(m));else if(fe()&&i()&&i().store){const{store:w,key:V}=i();w&&V&&typeof w.update=="function"&&w.update(te=>(Me()&&(te[V]=Me()),te))}}function Zt(){m()&&P()&&m()[P()]&&Yn(xe(),ue(m)[P()]=x(R(m()[P()])),ue(m))}function Xt(w){(w||!d())&&(q(Jt,null),q(B,null))}function Wt(){o($e)&&(o(we)&&ve.recalculatePosition(),Eo=requestAnimationFrame(Wt))}function Yt(){S.delete("cursor"),S.match(ve).forEach(V=>S.delete(V)),Xt(!1),Zt()}function rn(){if(R(ve.connected).size>1)return;const w=Array.from(R(ve.connected))[0];if(w.type!=="input")if(Yt(),w.type==="output"){bt(w,A,!0),Zt();const V=w.store;q(Jt,{anchor:w,store:V,key:null})}else bt(w,A,!0),q(Jt,{anchor:w,store:null,key:null})}function hn(){o(H).forEach((w,V)=>{if(!w)return;Mt(w)&&ke(ke()[V]=null,!0)}),b(H,o(H).filter(w=>w!==null))}function Oe(){ke().forEach(w=>{w&&Mt(w)})}function Ue(w){const V=`N-${w[0]}`,te=ne.get(V);if(!te)return;const ie=te.anchors.get(`A-${w[1]}/N-${w[0]}`);if(!ie)return;const me=S.match(ve,ie);me&&S.delete(me[0])}const Mt=w=>{let V,te,ie=null;Array.isArray(w)?(V=w[0].toString(),te=w[1].toString()):(V=w.toString(),te=null);const me=`N-${V}`,Pe=ne.get(me);if(!Pe)return!1;if(te){const He=`A-${te}/${me}`;ie=Pe.anchors.get(He)||null}else{const He=R(Pe.anchors),Je=Array.from(He.values());if(!Je.length)return!1;ie=Je.reduce((it,Ct)=>!it&&Ct.type==="output"?null:Ct.type==="output"?it:!it||R(Ct.connected).size<R(it.connected).size?Ct:it,null)}if(!ie)return!1;if(Ye(ve,ie),ie.store&&(xe()||Me())){if(Y()&&ie.type==="output")m()&&P()&&xe()&&typeof xe().set=="function"&&typeof xe().update=="function"&&Yn(xe(),ue(m)[P()]=ie.store,ue(m));else if(fe()&&ie.type==="input"){const{store:He,inputKey:Je}=ie;He&&Je&&typeof He.update=="function"&&He.update(it=>(Me()&&(it[Je]=Me()),it))}}return!0};k(()=>i(),()=>{var w;b(y,((w=i())==null?void 0:w.anchor)===ve)}),k(()=>{},()=>{fn(b(u,ve&&ve.connected),"$connectedAnchors",n)}),k(()=>{},()=>{fn(b(L,ve==null?void 0:ve.direction),"$dynamicDirection",n)}),k(()=>(K(I()),o(we),l()),()=>{I()&&o(we)&&Ca(o(we),l(),_)}),k(()=>(c(),K(ke())),()=>{c()===ne.count()&&ke().length&&Oe()}),k(()=>(K(Ie()),d()),()=>{Ie()&&d()&&It(d())}),k(()=>(c(),o(H)),()=>{c()===ne.count()&&o(H).length&&hn()}),k(()=>(o(we),f(),g(),l()),()=>{o(we)&&(f(),g(),l(),ve.recalculatePosition())}),k(()=>(o($e),p(),E(),v()),()=>{!o($e)&&(p()||E()||v())?(b($e,!0),Wt()):!p()&&!E()&&o($e)&&!v()&&(b($e,!1),cancelAnimationFrame(Eo))}),k(()=>(g(),o(Ve)),()=>{if(g()){if(g().size<o(Ve))_e("disconnection",{node:_,anchor:ve});else if(g().size>o(Ve)){const w=Array.from(g()),V=w[w.length-1];ge("connection",{node:_,anchor:ve,connectedNode:V.node,connectedAnchor:V})}b(Ve,g().size)}}),Pt(),mt();var St=Na(),tt=se(St);let sn;var gn=De(tt);ze(gn,e,"default",{get linked(){return g(),ue(()=>{var w;return((w=g())==null?void 0:w.size)>=1})},get hovering(){return o(ct)},get connecting(){return o(y)}},w=>{var V=Ce(),te=se(V);{var ie=me=>{{let Pe=Nt(()=>(g(),ue(()=>{var He;return((He=g())==null?void 0:He.size)>=1})));pa(me,{get output(){return fe()},get input(){return Y()},get connecting(){return o(y)},get hovering(){return o(ct)},get bgColor(){return ee()},get connected(){return o(Pe)}})}};Le(te,me=>{Te()||me(ie)})}O(w,V)}),Ae(tt),Pn(tt,w=>b(we,w),()=>o(we));var ht=ce(tt,2);Ht(ht,1,()=>(g(),ue(()=>Array.from(g()))),w=>w.id,(w,V,te,ie)=>{const me=Nt(()=>(o(V),ue(()=>S.fetch(ve,o(V)))));var Pe=Ce(),He=se(Pe);{var Je=it=>{const Ct=Nt(()=>(K(o(me)),ue(()=>o(me).component)));ar(it,{get edge(){return o(me)},children:(an,_n)=>{var Kt=Ce(),ln=se(Kt);ze(ln,e,"edge",{},dt=>{var Qe=Ce(),st=se(Qe);{var zt=Ne=>{o(Ct)(Ne,{})},pt=Ne=>{sr(Ne,{})};Le(st,Ne=>{o(Ct)?Ne(zt):Ne(pt,!1)})}O(dt,Qe)}),O(an,Kt)},$$slots:{default:!0}})};Le(He,it=>{K(o(me)),ue(()=>o(me)&&o(me).source===ve)&&it(Je)})}O(w,Pe)});var Gt=ce(ht,2);{var xt=w=>{const V=Nt(()=>ue(()=>S.get("cursor")));var te=Ce(),ie=se(te);{var me=Pe=>{const He=Nt(()=>(K(o(V)),ue(()=>o(V).component)));ar(Pe,{get edge(){return o(V)},children:(Je,it)=>{var Ct=Ce(),an=se(Ct);ze(an,e,"edge",{},_n=>{var Kt=Ce(),ln=se(Kt);{var dt=st=>{o(He)(st,{})},Qe=st=>{sr(st,{})};Le(ln,st=>{o(He)?st(dt):st(Qe,!1)})}O(_n,Kt)}),O(Je,Ct)},$$slots:{default:!0}})};Le(ie,Pe=>{o(V)&&Pe(me)})}O(w,te)};Le(Gt,w=>{o(y)&&w(xt)})}Fe(w=>{G(tt,"id",ue(()=>ve==null?void 0:ve.id)),sn=yt(tt,1,"anchor-wrapper svelte-9jil61",null,sn,w),G(tt,"title",be()||"")},[()=>({locked:T()})]),Ee("mouseenter",tt,()=>b(ct,!0)),Ee("mouseleave",tt,()=>b(ct,!1)),Ee("mousedown",tt,Tt(Qt($t))),Ee("mouseup",tt,Qt(It)),Ee("touchstart",tt,Tt(Qt($t))),Ee("touchend",tt,Qt(It)),O(t,St),Bo(e,"disconnect",Ue);var Lt=vt({disconnect:Ue});return r(),Lt}var Aa=je("<!> <!>",1),Ea=je("<div></div> <div></div>",1),Ma=je('<div><!> <p class="svelte-iy7x6k"> </p> <!></div>');function ka(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(v,"$borderRadius",n),a=()=>D(y,"$inputs",n),s=()=>D(u,"$outputs",n),l=()=>D(m,"$textColor",n),c=()=>D(E,"$label",n),d=()=>D(L,"$resizable",n),f=Re("dynamic"),g=Re("node");let p=h(e,"selected",8);const E=g.label,v=g.borderRadius,m=g.textColor,y=g.inputs,u=g.outputs,L=g.resizable,M=R(g.direction);let _=M==="TD",S=M==="TD",A=M!=="TD",z=M!=="TD";mt();var $=Ma();let Q,ne;var j=De($);{var B=re=>{var I=Aa(),We=se(I);Ht(We,1,()=>({length:a()}),on,(P,Me)=>{Jn(P,{$$events:{connection(ke){lt.call(this,e,ke)},disconnection(ke){lt.call(this,e,ke)}}})});var xe=ce(We,2);Ht(xe,1,()=>({length:s()}),on,(P,Me)=>{Jn(P,{$$events:{connection(ke){lt.call(this,e,ke)},disconnection(ke){lt.call(this,e,ke)}}})}),O(re,I)},X=re=>{var I=Ea(),We=se(I);let xe;Ht(We,5,()=>({length:a()}),on,(ke,Be)=>{{let W=Nt(()=>_?"north":"west");Jn(ke,{input:!0,get direction(){return o(W)},$$events:{connection(T){lt.call(this,e,T)},disconnection(T){lt.call(this,e,T)}}})}}),Ae(We);var P=ce(We,2);let Me;Ht(P,5,()=>({length:s()}),on,(ke,Be)=>{{let W=Nt(()=>_?"south":"east");Jn(ke,{output:!0,get direction(){return o(W)},$$events:{connection(T){lt.call(this,e,T)},disconnection(T){lt.call(this,e,T)}}})}}),Ae(P),Fe((ke,Be)=>{xe=yt(We,1,"input-anchors svelte-iy7x6k",null,xe,ke),Me=yt(P,1,"output-anchors svelte-iy7x6k",null,Me,Be)},[()=>({top:_,left:A}),()=>({bottom:S,right:z})]),O(re,I)};Le(j,re=>{f?re(B):re(X,!1)})}var J=ce(j,2);let ee;var F=De(J,!0);Ae(J);var Y=ce(J,2);{var fe=re=>{va(re,{width:!0,height:!0,rotation:!0})};Le(Y,re=>{d()&&re(fe)})}Ae($),Fe((re,I,We)=>{Q=yt($,1,"default-node svelte-iy7x6k",null,Q,re),ne=ot($,"",ne,I),ee=ot(J,"",ee,We),Fn(F,c())},[()=>({selected:p()}),()=>({"border-radius":`${i()??""}px`}),()=>({color:l()})]),O(t,$),vt(),r()}function Br(t,e){const n=Wo(e);gt(e,!1);const[r,i]=At(),a=()=>D(o(l),"$nodePosition",r),s=()=>D(xe,"$nodes",r),l=N(),c=Re("graph"),d=Re("group");let f=h(e,"position",28,()=>({x:0,y:0})),g=h(e,"drop",8,!1),p=h(e,"dimensions",8,null),E=h(e,"id",8,0),v=h(e,"bgColor",8,null),m=h(e,"borderRadius",8,null),y=h(e,"borderColor",8,null),u=h(e,"borderWidth",8,null),L=h(e,"selectionColor",8,null),M=h(e,"textColor",8,null),_=h(e,"resizable",8,!1),S=h(e,"label",8,""),A=h(e,"inputs",8,1),z=h(e,"outputs",8,1),$=h(e,"width",8,null),Q=h(e,"height",8,null),ne=h(e,"TD",8,!1),j=h(e,"LR",8,!1),B=h(e,"zIndex",8,1),X=h(e,"editable",8,!0),J=h(e,"locked",8,!1),ee=h(e,"rotation",8,0),F=h(e,"edge",8,null),Y=h(e,"connections",24,()=>[]),fe=h(e,"useDefaults",8,!1),re=h(e,"center",8,!1),I=h(e,"dynamic",8,!1),We=h(e,"title",8,"");const xe=c.nodes;Ke("dynamic",I());let P=N(),Me=N(!0);en(()=>{const Z=ne()?"TD":j()?"LR":c.direction,Te=c.groupBoxes.get(d),ye=c.nodes.count()+1;b(Me,!n.default),(n.anchorWest||n.anchorEast||n.anchorNorth||n.anchorSouth)&&b(Me,!1);const be=p()?p():$()||Q()?{width:$()||Q()||200,height:Q()||$()||100}:o(Me)?{width:200,height:100}:{width:0,height:0},ge={id:E()||ye,position:g()==="cursor"?{x:R(c.cursor).x,y:R(c.cursor).y}:Te?{x:R(Te.position).x+f().x,y:R(Te.position).y+f().y}:f(),dimensions:be,editable:X()||c.editable,label:S(),group:d,resizable:_(),inputs:A(),outputs:z(),zIndex:B(),direction:Z,locked:J(),rotation:ee()};Y().length&&(ge.connections=Y()),u()&&(ge.borderWidth=u()),m()&&(ge.borderRadius=m()),y()&&(ge.borderColor=y()),L()&&(ge.selectionColor=L()),M()&&(ge.textColor=M()),v()&&(ge.bgColor=v()),F()&&(ge.edge=F()),b(P,Ks(ge)),Te&&c.groups.update(_e=>{const we=R(_e[d].nodes);return _e[d].nodes.set(new Set([...we,o(P)])),_e}),c.nodes.add(o(P),o(P).id)}),ro(()=>{c.nodes.delete(o(P).id)});function ke(Z){o(P)&&o(P).connections.set([Z])}function Be(Z){if(!o(P))return;(Array.isArray(Z)?Z:[Z]).forEach(ye=>{const[be,ge]=Array.isArray(ye)?ye:[ye,null],_e=`N-${be}`,we=c.nodes.get(_e);if(!we)return;let $e=null;const ct=ge?`A-${ge}/${_e}`:null;ct&&($e=we.anchors.get(ct));const Ve=c.edges.match(o(P),we,$e);Ve.length&&c.edges.delete(Ve[Ve.length-1])})}Ke("connect",ke),Ke("disconnect",Be);let W=N(f());k(()=>(o(P),K(Y())),()=>{o(P)&&o(P).connections.set(Y())}),k(()=>(o(P),K(v())),()=>{o(P)&&o(P).bgColor.set(v())}),k(()=>(o(P),K(S())),()=>{o(P)&&o(P).label.set(S())}),k(()=>(o(P),K(M())),()=>{o(P)&&o(P).textColor.set(M())}),k(()=>(o(P),K(y())),()=>{o(P)&&o(P).borderColor.set(y())}),k(()=>(o(P),K(L())),()=>{o(P)&&o(P).selectionColor.set(L())}),k(()=>(o(P),K(_())),()=>{o(P)&&o(P).resizable.set(_())}),k(()=>(o(P),K(X())),()=>{o(P)&&o(P).editable.set(X())}),k(()=>(o(P),K(J())),()=>{o(P)&&o(P).locked.set(J())}),k(()=>(o(P),K(A())),()=>{o(P)&&o(P).inputs.set(A())}),k(()=>(o(P),K(z())),()=>{o(P)&&o(P).outputs.set(z())}),k(()=>(o(P),K(B())),()=>{o(P)&&o(P).zIndex.set(B())}),k(()=>o(P),()=>{var Z;fn(b(l,o(P)&&((Z=o(P))==null?void 0:Z.position)),"$nodePosition",r)}),k(()=>(o(P),o(W),a(),K(f())),()=>{if(o(P)){const{x:Z,y:Te}=o(W),{x:ye,y:be}=a(),{x:ge,y:_e}=f();(ge!==ye||_e!==be)&&(ge!==Z||_e!==Te?(b(W,f()),o(P).position.set(f())):(b(W,a()),f(a())))}}),k(()=>(o(P),K(A())),()=>{o(P)&&o(P).inputs.set(A())}),k(()=>(o(P),K(z())),()=>{o(P)&&o(P).outputs.set(z())}),Pt(),mt();var T=Ce(),Ie=se(T);{var he=Z=>{{let Te=Nt(()=>re()||g()==="center"),ye=Nt(()=>!!p()||!!$()||!!Q()||o(Me)||!1);ca(Z,{get node(){return o(P)},get center(){return o(Te)},get isDefault(){return o(Me)},get useDefaults(){return fe()},get dimensionsProvided(){return o(ye)},get nodeStore(){return ue(()=>c.nodes)},get locked(){return ue(()=>c.locked)},get groups(){return ue(()=>c.groups)},get title(){return We()},get maxZIndex(){return ue(()=>c.maxZIndex)},get centerPoint(){return ue(()=>c.center)},get cursor(){return ue(()=>c.cursor)},get activeGroup(){return ue(()=>c.activeGroup)},get editing(){return ue(()=>c.editing)},get initialNodePositions(){return ue(()=>c.initialNodePositions)},$$events:{nodeClicked(be){lt.call(this,e,be)},nodeMount(be){lt.call(this,e,be)},nodeReleased(be){lt.call(this,e,be)},duplicate(be){lt.call(this,e,be)}},children:Mi,$$slots:{default:(be,ge)=>{const _e=Nt(()=>ge.destroy),we=Nt(()=>ge.selected),$e=Nt(()=>ge.grabHandle);var ct=Ce(),Ve=se(ct);ze(Ve,e,"default",{get selected(){return o(we)},get grabHandle(){return o($e)},disconnect:Be,connect:ke,get node(){return o(P)},get destroy(){return o(_e)}},de=>{var H=Ce(),ae=se(H);{var Se=Xe=>{ka(Xe,{get selected(){return o(we)},$$events:{connection(et){lt.call(this,e,et)},disconnection(et){lt.call(this,e,et)}}})};Le(ae,Xe=>{o(Me)&&Xe(Se)})}O(de,H)}),O(be,ct)},anchorWest:(be,ge)=>{var _e=Ce(),we=se(_e);ze(we,e,"anchorWest",{},null),O(be,_e)},anchorEast:(be,ge)=>{var _e=Ce(),we=se(_e);ze(we,e,"anchorEast",{},null),O(be,_e)},anchorNorth:(be,ge)=>{var _e=Ce(),we=se(_e);ze(we,e,"anchorNorth",{},null),O(be,_e)},anchorSouth:(be,ge)=>{var _e=Ce(),we=se(_e);ze(we,e,"anchorSouth",{},null),O(be,_e)}}})}};Le(Ie,Z=>{o(P),s(),ue(()=>o(P)&&s().get(o(P).id))&&Z(he)})}O(t,T),vt(),i()}var Da=je('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function Pa(t,e){gt(e,!1);const n=N();let r=h(e,"editing",8);const i=Re("graph");Ke("graph",i),Ke("textStore",r().label),Ke("colorStore",r().bgColor);let a=N({x:150,y:50});function s(d){d.preventDefault(),b(a,{x:d.clientX,y:d.clientY}),i.editing.set(r())}function l(){i.nodes.delete(r().id),i.editing.set(null)}function c(){const d=r().id,f=i.nodes.get(d);if(f){const g=f.dimensions.width,p=f.dimensions.height,E=prompt("Enter new width (for example:250):",g?g.toString():""),v=prompt("Enter new height (for example:200):",p?p.toString():"");if(E===null||v===null)return;f.dimensions.width.set(parseInt(E,10)||0),f.dimensions.height.set(parseInt(v,10)||0),f.resizingWidth.set(!0),f.resizingHeight.set(!0)}}k(()=>{},()=>{b(n,i.cursor)}),Pt(),mt(),Br(t,{zIndex:1/0,get position(){return o(a)},bgColor:"white",id:"editor",children:(d,f)=>{var g=Da(),p=ce(De(g),2),E=ce(p,2);ia(E,{placeholder:"Node Label"});var v=ce(E,2),m=ce(v,2);Ae(g),Ee("click",p,()=>i.editing.set(null)),Ee("click",v,l),Ee("click",m,c),Ee("contextmenu",g,s),O(d,g)},$$slots:{default:!0}}),vt()}var Ia=je("<!> <!>",1),La=je('<section role="presentation" class="svelvet-wrapper svelte-1vkscdz"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function za(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(be,"$groups",n),a=()=>D(Te,"$dimensionsStore",n),s=()=>D(Ve,"$nodeBounds",n),l=()=>D(Ie,"$graphDOMElement",n),c=()=>D(Dt,"$initialClickPosition",n),d=()=>D(_e,"$selected",n),f=()=>D(we,"$activeGroup",n),g=()=>D(Jt,"$connectingFrom",n),p=()=>D(Io,"$touchDistance",n),E=()=>D(Z,"$scale",n),v=()=>D(ye,"$translation",n),m=()=>D(ct,"$editing",n),y=N();let u=h(e,"graph",8),L=h(e,"width",8),M=h(e,"height",8),_=h(e,"minimap",12,!1),S=h(e,"controls",12,!1),A=h(e,"toggle",8,!1),z=h(e,"fixedZoom",8,!1),$=h(e,"pannable",8,!0),Q=h(e,"disableSelection",8,!1),ne=h(e,"ZOOM_INCREMENT",8,.1),j=h(e,"PAN_INCREMENT",8,50),B=h(e,"PAN_TIME",8,250),X=h(e,"MAX_SCALE",8,3),J=h(e,"MIN_SCALE",8,.2),ee=h(e,"selectionColor",8),F=h(e,"backgroundExists",8),Y=h(e,"fitView",8,!1),fe=h(e,"trackpadPan",8),re=h(e,"modifier",8),I=h(e,"theme",12,"light"),We=h(e,"title",8),xe=h(e,"drawer",12,!1),P=h(e,"contrast",8,!1);console.log("Initial Graph drawer prop:",xe());let Me;const ke=En(),Be={},W=x(!1),T=x(0),Ie=x(null),he=u().cursor,Z=u().transforms.scale,Te=u().dimensions,ye=u().transforms.translation,be=u().groups,ge=u().groupBoxes,_e=i().selected.nodes,we=u().activeGroup,$e=u().initialNodePositions,ct=u().editing,Ve=u().bounds.nodeBounds;let de=0,H=1,ae=N({x:0,y:0,top:0,left:0}),Se=N(!1),Xe=N(!1),et=N(!1),qe=N(!1),rt=!1,tn=N(!1),ve,Ot=N(null),Rt=N(null),It=N(null),$t=N(null),Et=N(null);const bt={id:null,position:u().cursor,offset:x({x:0,y:0}),connected:x(new Set),dynamic:x(!1),edge:null,edgeColor:x(null),direction:x("self"),inputKey:null,type:"output",moving:Mo(!1),store:null,mounted:x(!0),rotation:Mo(0),node:{zIndex:x(1/0),rotating:x(!1),position:u().cursor,dimensions:{width:x(0),height:x(0)}}};Ke("graphDOMElement",Ie),Ke("cursorAnchor",bt),Ke("duplicate",W),Ke("graph",u()),Ke("transforms",u().transforms),Ke("dimensions",u().dimensions),Ke("locked",u().locked),Ke("groups",u().groups),Ke("bounds",u().bounds),Ke("edgeStore",u().edges),Ke("nodeStore",u().nodes),Ke("mounted",T),en(()=>{console.log("Graph component mounted with drawer1:",xe()),Yt()});async function Vt(){await ki(),Bt.set(!0);const{x:C,y:U,scale:le}=Gs(ve,s());C!==null&&U!==null&&le!==null&&(u().transforms.scale.set(le),ye.set({x:C,y:U})),Bt.set(!1),b(tn,!0)}async function Ye(){b(Rt,(await Tn(async()=>{const{default:C}=await import("./CXzDiYDv.js");return{default:C}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default)}async function Ze(){b(Ot,(await Tn(async()=>{const{default:C}=await import("./DRPH4E--.js");return{default:C}},__vite__mapDeps([7,1,2,3,5,6,4]),import.meta.url)).default)}async function Zt(){b(It,(await Tn(async()=>{const{default:C}=await import("./BtX3fOzr.js");return{default:C}},__vite__mapDeps([8,1,2,3,5,4,9,6,10]),import.meta.url)).default)}async function Xt(){b($t,(await Tn(async()=>{const{default:C}=await import("./B2BjHTou.js");return{default:C}},__vite__mapDeps([11,1,2,3,5,9,4,6,10,12]),import.meta.url)).default)}async function Wt(){b(Et,(await Tn(async()=>{const{default:C}=await import("./CpgJt3K4.js");return{default:C}},__vite__mapDeps([13,1,2,3,5,4,6]),import.meta.url)).default)}function Yt(){if(!l())return;const C=l().getBoundingClientRect();ve={top:C.top,left:C.left,bottom:C.bottom,right:C.right,width:C.width,height:C.height},u().dimensions.set(ve),Y()==="resize"&&Vt()}function rn(C){var le,oe;if(o(Xe)){const Ge=`${ds()}/${u().id}`,at=R(he),ft=at.x-c().x,_t=at.y-c().y,kt=Math.min(c().y,c().y+_t),wt=Math.min(c().x,c().x+ft),qt={width:x(Math.abs(ft)),height:x(Math.abs(_t))},Ln=x({x:wt,y:kt}),vn={group:x(Ge),dimensions:qt,position:Ln,color:x(os()),moving:x(!1)};ge.add(vn,Ge),Array.from(d()).forEach(mn=>{mn.group.set(Ge)}),be.update(mn=>{const uo={parent:x(vn),nodes:x(new Set([...d(),vn]))};return mn[Ge]=uo,mn}),q(_e,new Set),b(Xe,!1),b(Se,!1)}f()&&Array.from(R(i()[f()].nodes)).forEach(Ge=>{const at=Qn(R(Ge.position).x,R(Ge.position).y);Ge.position.set(at),Ge.moving.set(!1)});const U=u().edges.get("cursor");U&&(u().edges.delete("cursor"),U.disconnect||ke("edgeDrop",{cursor:R(he),source:{node:(le=g())==null?void 0:le.anchor.node.id.slice(2),anchor:(oe=g())==null?void 0:oe.anchor.id.split("/")[0].slice(2)}})),q(we,null),q(Dt,{x:0,y:0}),q($e,[]),b(Se,!1),b(qe,!1),q(Bt,!1),C.shiftKey||Jt.set(null),Sn(ae,o(ae).y=0),Sn(ae,o(ae).x=0)}function hn(C){if(!$()&&!(C.shiftKey||C.metaKey)||C.button===2)return;l()&&l().focus();const{clientX:U,clientY:le}=C;if(q(Dt,R(he)),C.shiftKey||C.metaKey){C.preventDefault(),b(Se,!0);const{top:oe,left:pe}=o(y);Sn(ae,o(ae).y=le-oe),Sn(ae,o(ae).x=U-pe),Sn(ae,o(ae).top=oe),Sn(ae,o(ae).left=pe),C.shiftKey&&C.metaKey?b(Xe,!0):b(Xe,!1),C.metaKey&&!C.shiftKey?b(et,!0):b(et,!1)}else b(qe,!0),q(_e,new Set),q(_e,d())}function Oe(C){q(_e,new Set),q(_e,d()),q(Dt,R(he)),b(qe,!0),C.touches.length===2&&(Mt(),de=p(),H=E())}function Ue(){b(qe,!1),rt=!1}function Mt(){rt||(rt=!0,Me=requestAnimationFrame(St))}function St(){if(!rt){cancelAnimationFrame(Me);return}const U=p()/de;q(Z,H*U),Me=requestAnimationFrame(St)}function tt(C){const{key:U,code:le}=C,oe=C.target;if(!(oe.tagName=="INPUT"||oe.tagName=="TEXTAREA")){if(le==="KeyA"&&C[`${re()}Key`]){const pe=u().nodes.getAll().filter(Ge=>!R(Ge.locked));q(_e,new Set(pe))}else if(ir(U))Lt(U,C);else if(U==="=")rr(-1,u().dimensions,u().transforms,ne());else if(U==="-")rr(1,u().dimensions,u().transforms,ne());else if(U==="0")Vt();else if(U==="Control")i().selected.nodes.set(new Set);else if(le==="KeyD"&&C[`${re()}Key`])W.set(!0),setTimeout(()=>{W.set(!1)},100);else if(U==="Tab"&&(C.altKey||C.ctrlKey))gn();else if(U==="l")I(I()==="light"?"dark":"light");else if(U==="d")xe(!xe());else if(U==="m")_(!_());else if(U==="c")S(!S());else if(U==="e"){const pe=Array.from(d())[0];u().editing.set(pe)}else return;C.preventDefault()}}function sn(C){var _t;C.preventDefault();const U=(_t=l())==null?void 0:_t.getBoundingClientRect();if(!U)return;const le=C.clientX-U.left,oe=C.clientY-U.top,{x:pe,y:Ge}=Qn(le,oe);if(console.log(`Dropped Node at Snapped Position: (${pe}, ${Ge})`),!ft)return;const at={id:`node-${Date.now()}`,rotation:x(0),position:x({x:pe,y:Ge}),moving:x(!1),label:x("New Node"),dimensions:{width:x(200),height:x(100)},inputs:x(2),outputs:x(2),anchors:x([]),group:x(null),collapsed:x(!1),resizingWidth:x(!1),resizingHeight:x(!1),rotating:x(!1),editable:x(!0),locked:x(!1),recalculateAnchors:kt=>{},resizable:x(!0),zIndex:x(1),edge:null,direction:x("TD"),borderRadius:x(5),borderWidth:x(1),connections:x([]),bgColor:x("#007bff"),borderColor:x("#000"),selectionColor:x("#ff0000"),textColor:x("#fff")};let ft=null;u().nodes.add(at,at.id),ft=null}function gn(){const C=u().nodes.getAll(),U=C.findIndex(oe=>d().has(oe)),le=U+1;d().delete(C[U]),d().add(C[le])}function ht(C){const{key:U}=C;ir(U)?(clearInterval(Be[U]),delete Be[U]):U==="Shift"&&Jt.set(null)}function Gt(C){if(z())return;const U=C.shiftKey?.15:1,{clientX:le,clientY:oe,deltaY:pe}=C,Ge=v(),at={x:le,y:oe};if((fe()||C.metaKey)&&pe%1===0){q(ye,{x:Yn(ye,ue(v).x-=C.deltaX,ue(v)),y:Yn(ye,ue(v).y-=C.deltaY,ue(v))});return}if(E()>=X()&&pe<0||E()<=J()&&pe>0)return;const ft=Math.min(.009*U*Math.abs(pe),.08),_t=zr(E(),Math.sign(pe),ft),kt=Lr(E(),_t,Ge,at,ve);Z.set(_t),ye.set(kt)}function xt(C){C.preventDefault()}function Lt(C,U){const le=U.shiftKey?2:1,oe=C==="ArrowLeft"||C==="ArrowUp"?1:-1,pe=C==="ArrowLeft"||C==="ArrowRight",Ge=pe?v().x:v().y,at=Ge+oe*j()*le;if(!Be[C]){const ft=performance.now();let _t=setInterval(()=>{const kt=performance.now()-ft;if(d().size===0){const wt=Ge+(at-Ge)*(kt/B());ye.set({x:pe?wt:v().x,y:pe?v().y:wt})}else{const wt={x:pe?-oe*2:0,y:pe?0:-oe*2};Array.from(d()).forEach(qt=>{const Ln=R(qt.position);let vn;const mn=R(qt.group),uo=R(u().groupBoxes);if(mn&&(vn=uo.get(mn)),vn){const jn=R(qt.dimensions.width),fo=R(qt.dimensions.height),$r=Wr(vn,jn,fo);Rr(Ln,wt,qt.position,$r)}else{const jn={x:Ln.x+wt.x,y:Ln.y+wt.y},fo=Qn(jn.x,jn.y);qt.position.set(fo)}})}},2);Be[C]=_t}}k(()=>a(),()=>{b(y,a())}),k(()=>K(I()),()=>{I()&&document.documentElement.setAttribute("svelvet-theme",I())}),k(()=>(o(tn),K(Y())),()=>{!o(tn)&&Y()&&Vt()}),k(()=>(K(A()),o(Ot)),()=>{A()&&!o(Ot)&&Ze()}),k(()=>(K(_()),o(Rt)),()=>{_()&&!o(Rt)&&Ye()}),k(()=>(K(S()),o(It)),()=>{S()&&!o(It)&&Zt()}),k(()=>(K(xe()),o($t)),()=>{xe()&&!o($t)&&Xt()}),k(()=>(K(P()),o(Et)),()=>{P()&&!o(Et)&&Wt()}),k(()=>K(xe()),()=>{console.log("Reactive Graph drawer prop:",xe())}),Pt(),mt();var w=La();Ee("touchend",Vn,rn),Ee("mouseup",Vn,rn),Ee("resize",Vn,Yt),Ee("scroll",Vn,Yt),G(w,"tabindex",0);let V;var te=De(w);ta(te,{get isMovable(){return o(qe)},children:(C,U)=>{var le=Ia(),oe=se(le);{var pe=at=>{Pa(at,{get editing(){return m()}})};Le(oe,at=>{m()&&at(pe)})}var Ge=ce(oe,2);ze(Ge,e,"default",{},null),O(C,le)},$$slots:{default:!0}});var ie=ce(te,2);{var me=C=>{var U=Ce(),le=se(U);ze(le,e,"background",{},null),O(C,U)},Pe=C=>{Ls(C,{})};Le(ie,C=>{F()?C(me):C(Pe,!1)})}var He=ce(ie,2);{var Je=C=>{var U=Ce(),le=se(U);On(le,()=>o(Rt),(oe,pe)=>{pe(oe,{})}),O(C,U)};Le(He,C=>{_()&&C(Je)})}var it=ce(He,2);{var Ct=C=>{var U=Ce(),le=se(U);On(le,()=>o(It),(oe,pe)=>{pe(oe,{})}),O(C,U)};Le(it,C=>{S()&&C(Ct)})}var an=ce(it,2);{var _n=C=>{var U=Ce(),le=se(U);On(le,()=>o(Ot),(oe,pe)=>{pe(oe,{})}),O(C,U)};Le(an,C=>{A()&&C(_n)})}var Kt=ce(an,2);{var ln=C=>{var U=Ce(),le=se(U);On(le,()=>o($t),(oe,pe)=>{pe(oe,{})}),O(C,U)};Le(Kt,C=>{xe()&&C(ln)})}var dt=ce(Kt,2);{var Qe=C=>{var U=Ce(),le=se(U);On(le,()=>o(Et),(oe,pe)=>{pe(oe,{})}),O(C,U)};Le(dt,C=>{P()&&C(Qe)})}var st=ce(dt,2);ze(st,e,"minimap",{},null);var zt=ce(st,2);ze(zt,e,"drawer",{},null);var pt=ce(zt,2);ze(pt,e,"controls",{},null);var Ne=ce(pt,2);ze(Ne,e,"toggle",{},null);var Ft=ce(Ne,2);ze(Ft,e,"contrast",{},null);var cn=ce(Ft,2);{var wn=C=>{gs(C,{get creating(){return o(Xe)},get anchor(){return o(ae)},get graph(){return u()},get adding(){return o(et)},get color(){return ee()}})};Le(cn,C=>{o(Se)&&!Q()&&C(wn)})}Ae(w),Pn(w,C=>q(Ie,C),()=>l()),Fe(C=>{G(w,"id",(K(u()),ue(()=>u().id))),G(w,"title",We()),V=ot(w,"",V,C)},[()=>({width:L()?L()+"px":"100%",height:M()?M()+"px":"100%",cursor:$()?"move":"default"})]),Ee("wheel",w,Tt(Gt)),Ee("mousedown",w,Kn(Tt(hn))),Ee("touchend",w,Tt(Ue)),Ee("touchstart",w,Kn(Tt(Oe))),Ee("keydown",w,tt),Ee("keyup",w,ht),Ee("dragover",w,Tt(xt)),Ee("drop",w,sn),O(t,w),vt(),r()}function Ta(t){t.parentNodes.forEach(a=>Oa(a));const[e,n]=Ra(t);Wa(e,t),Ba(e);for(let a=0;a<10;a++){let s=!1;for(let l=0;l<=n;l++)if(e[l])for(let c=0;c<e[l].length;c++){const d=e[l][c],f=Xa(e,d,c);f&&(bn(e[l],c,f),s=!0)}if(!s)break}const r=Ya(e);for(let a=0;a<10&&Ga(e,r);a++);for(let a=0;a<2;a++){let s=!1;for(let l=0;l<=n;l++)for(let c=0;c<e[l].length;c++){const d=e[l][c],f=$a(e,d,c);f&&(bn(e[l],c,f),s=!0)}if(!s)break}const i=[];for(let a=0;a<=n;a++)i.push(e[a]);return i}function Oa(t,e=0,n=0){const r=[],i=(a,s=0,l=0)=>{a.depth=Math.max(a.depth,s),a.nesting=Math.max(a.nesting,l),r.push(a);for(const c of a.children){const{node:d,length:f}=c;i(d,f+s,l+1)}};i(t,e,n);for(const a of r)if(a.children.length){a.nesting=a.children[0].node.nesting-1,a.depth=a.children[0].node.depth-a.children[0].length;for(const s of a.children)a.nesting=Math.min(a.nesting,s.node.nesting-1),a.depth=Math.min(a.depth,s.node.depth-s.length)}}function Ra(t){let e=0;const n={};for(const r in t.nodeList){const{depth:i,parents:a,children:s,type:l,data:c}=t.nodeList[r];e=Math.max(e,i),n[i]||(n[i]=[]);const d={id:r,label:c.content,children:[],parents:[],layer:i,type:l.trim()};c.props&&(d.propsId=c.props.trim());for(const f of a)d.parents.push(f.node.id);for(const f of s)d.children.push(f.node.id);n[i].push(d)}return[n,e]}function Wa(t,e){for(const n in e.nodeList)for(const r of e.nodeList[n].children)if(r.node.depth-1>e.nodeList[n].depth){const i=e.nodeList[n].depth+1,a=r.node.depth-1,s=[];let l=0;for(let c=i;c<=a;c++){const d={id:`GHOST_${r.node.id}_${l}`,label:"",children:[],parents:[],layer:c,ignore:!0};s.push(d),l++}for(const c of r.node.parents)s[0].parents.push(c.node.id);s[s.length-1].children.push(r.node.id);for(let c=0;c<s.length-1;c++)s[c].children.push(`GHOST_${r.node.id}_${c+1}`);for(let c=a;c>=i;c--)s.length>0&&t[c].push(s[0]);for(const c of t[e.nodeList[n].depth])c.id===n&&(c.children.push(s[0].id),c.children=c.children.filter(d=>d!==r.node.id))}}function Ba(t){let e=0;for(const n in t)e=Math.max(t[n].length,e);for(const n in t)if(t[n].length<e){const r=Array.from({length:e-t[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));t[n]=t[n].concat(r)}}function lr(t,e,n){let r=0,i=0;for(const a of e.parents){for(let s=0;s<t[e.layer-1].length;s++)if(a===t[e.layer-1][s].id){r+=Math.abs(n-s);break}i++}for(const a of e.children){for(let s=0;s<t[e.layer+1].length;s++)if(a===t[e.layer+1][s].id){r+=Math.abs(n-s);break}i++}return isNaN(r/i)?0:r/i}function cr(t,e,n){let r=0,i=0;for(const a of e.parents){for(let s=0;s<t[e.layer-1].length;s++)if(a===t[e.layer-1][s].id){r+=Math.abs(n-s);break}i++}return isNaN(r/i)?0:r/i}function dr(t,e,n){let r=0,i=0;for(const a of e.children){for(let s=0;s<t[e.layer+1].length;s++)if(a===t[e.layer+1][s].id){r+=Math.abs(n-s);break}i++}return isNaN(r/i)?0:r/i}function $a(t,e,n){const r=zo(t,e.layer);let i=0;e.layer===0?i=dr(t,e,n):i=cr(t,e,n);let a=i,s=n;for(let l=0;l<t[e.layer].length;l++)if(t[e.layer][l].id==="NULL_NODE"){bn(t[e.layer],n,l);const d=zo(t,e.layer);let f=0;e.layer===0?f=dr(t,e,l):f=cr(t,e,l),d<=r&&f<a&&(a=f,s=l),bn(t[e.layer],l,n)}return s===n?null:s}function Xa(t,e,n){const r={};let i=1/0,a=0;for(let s=0;s<t[e.layer].length;s++){const l=lr(t,e,s),c=lr(t,t[e.layer][s],n);r[s]=l+c}for(const s in r)r[s]<i&&(i=r[s],a=parseInt(s));return a===n?null:a}function bn(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ya(t){const e=[];for(const n in t)for(const r of t[n])e.push(r);return e.sort((n,r)=>r.parents.length+r.children.length-(n.parents.length+n.children.length))}function zo(t,e){let n=0;for(let r=0;r<t[e].length;r++){const i=t[e][r],a=[],s=[];if(t[e-1])for(let l=r+1;l<t[e-1].length;l++)i.parents.includes(t[e-1][l].id)&&a.push(l);if(t[e+1])for(let l=r+1;l<t[e+1].length;l++)i.children.includes(t[e+1][l].id)&&s.push(l);for(let l=r+1;l<t[e].length;l++){const c=t[e][l];if(a.length)for(let d=0;d<t[e-1].length;d++)c.parents.includes(t[e-1][d].id)&&a.forEach(f=>{d<f&&n++});if(s.length)for(let d=0;d<t[e+1].length;d++)c.children.includes(t[e+1][d].id)&&s.forEach(f=>{d<f&&n++})}}return n}function Ga(t,e){let n=!1;for(const r of e){if(r.children.length+r.parents.length===0)return n;let i=0;for(let l=0;l<t[r.layer].length;l++)if(t[r.layer][l].id===r.id){i=l;break}let a=1/0,s=i;for(let l=0;l<t[r.layer].length;l++){bn(t[r.layer],i,l);const c=zo(t,r.layer);c<a&&(a=c,s=l),bn(t[r.layer],l,i)}s!==i&&(bn(t[r.layer],i,s),n=!0)}return n}function Ka(t,e){gt(e,!1);let n=h(e,"mermaid",8,""),r=h(e,"mermaidConfig",24,()=>({}));const i=ss(n());Ke("flowchart",i);const a=Ta(i),s=Re("graph"),l=100,c=100;let d;en(()=>{s.nodes.subscribe(E=>d=Object.fromEntries(E));let p=0;for(const E of a){let v=0,m=-1/0;for(const y of E)y.ignore||(d[`N-${y.id}`].position.update(()=>({x:v,y:p})),d[`N-${y.id}`].dimensions.width.subscribe(u=>v+=u),d[`N-${y.id}`].dimensions.height.subscribe(u=>m=Math.max(m,u))),v+=l;p+=m+c}}),mt();var f=Ce(),g=se(f);Ht(g,1,()=>a,on,(p,E)=>{var v=Ce(),m=se(v);Ht(m,1,()=>o(E),on,(y,u)=>{var L=Ce(),M=se(L);{var _=S=>{{let A=Nt(()=>(o(u),ue(()=>o(u).children.map(z=>[z,"1"]))));Br(S,In({get label(){return o(u),ue(()=>o(u).label)},get id(){return o(u),ue(()=>o(u).id)},TD:!0},()=>r()[o(u).id],{get connections(){return o(A)}}))}};Le(M,S=>{o(u),ue(()=>!o(u).ignore)&&S(_)})}O(y,L)}),O(p,v)}),O(t,f),vt()}function Fa(t){var r,i;const e=JSON.parse(t);return Tr(e.id,{...e,editable:e.editable,direction:e.direction,locked:e.locked,zoom:((r=e.transforms)==null?void 0:r.scale)??1,translation:((i=e.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:e.edge})}var Ha=je("<!> <!>",1),ja=je('<div class="svelvet-temp svelte-xw3n4e"></div>');function Va(t,e){const n=Wo(e);gt(e,!1);const r=N(),i=N();let a=h(e,"mermaid",8,""),s=h(e,"theme",8,"light"),l=h(e,"id",8,0),c=h(e,"snapTo",8,0),d=h(e,"zoom",8,1),f=h(e,"TD",8,!1),g=h(e,"editable",8,!0),p=h(e,"locked",8,!1),E=h(e,"width",8,0),v=h(e,"height",8,0),m=h(e,"minimap",8,!1),y=h(e,"controls",8,!1),u=h(e,"toggle",8,!1),L=h(e,"drawer",8,!1),M=h(e,"contrast",8,!1),_=h(e,"fitView",8,!1),S=h(e,"selectionColor",8,"lightblue"),A=h(e,"edgeStyle",8,"bezier"),z=h(e,"endStyles",24,()=>[null,null]),$=h(e,"edge",8,null),Q=h(e,"disableSelection",8,!1),ne=h(e,"mermaidConfig",24,()=>({})),j=h(e,"translation",24,()=>({x:0,y:0})),B=h(e,"trackpadPan",8,!1),X=h(e,"modifier",8,"meta"),J=h(e,"raiseEdgesOnSelect",8,!1),ee=h(e,"edgesAboveNode",8,!1),F=h(e,"title",8,""),Y=h(e,"fixedZoom",8,!1),fe=h(e,"pannable",8,!0);const re=En();let I=N(null),We=f()?"TD":"LR";Ke("snapTo",c()),Ke("edgeStyle",A()),Ke("endStyles",z()),Ke("graphEdge",$()),Ke("raiseEdgesOnSelect",J()),Ke("edgesAboveNode",ee()),Ke("graph",o(I)),en(()=>{console.log("Graph component mounted with drawer:",L());const W=localStorage.getItem("state");if(console.log("stateObject during onMount:",W),W)b(I,Fa(W)),console.log("This is the graph set using reloadStore",o(I)),No.add(o(I),o(I).id),console.log("graphStore updated",o(I));else{let T=`G-${l()||No.count()+1}`;b(I,Tr(T,{zoom:d(),direction:We,editable:g(),locked:p(),translation:j()})),No.add(o(I),T)}});function xe(W,T){if(!o(I))return;const Ie=`N-${W[0]}`,he=o(I).nodes.get(Ie);if(!he)return;const Z=he.anchors.get(`A-${W[1]}/N-${W[0]}`);if(!Z)return;const Te=`N-${T[0]}`,ye=o(I).nodes.get(Te);if(!ye)return;const be=ye.anchors.get(`A-${T[1]}/N-${T[0]}`);if(!be)return;const ge=o(I).edges.match(Z,be);ge&&o(I).edges.delete(ge[0])}k(()=>{},()=>{b(r,n.background)}),k(()=>o(I),()=>{b(i,o(I)&&o(I).edges)}),k(()=>(o(I),K(d())),()=>{o(I)&&o(I).transforms.scale.set(d())}),k(()=>o(i),()=>{o(i)&&o(i).onEdgeChange((W,T)=>{re(T,{sourceAnchor:W.source,targetAnchor:W.target,sourceNode:W.source.node,targetNode:W.target.node})})}),Pt(),mt();var P=Ce(),Me=se(P);{var ke=W=>{za(W,{get width(){return E()},get height(){return v()},get toggle(){return u()},get backgroundExists(){return o(r)},get minimap(){return m()},get graph(){return o(I)},get fitView(){return _()},get fixedZoom(){return Y()},get pannable(){return fe()},get theme(){return s()},get drawer(){return L()},get controls(){return y()},get selectionColor(){return S()},get disableSelection(){return Q()},get trackpadPan(){return B()},get modifier(){return X()},get title(){return F()},get contrast(){return M()},$$events:{edgeDrop(T){lt.call(this,e,T)}},children:(T,Ie)=>{var he=Ha(),Z=se(he);{var Te=be=>{Ka(be,{get mermaid(){return a()},get mermaidConfig(){return ne()}})};Le(Z,be=>{K(a()),ue(()=>a().length)&&be(Te)})}var ye=ce(Z,2);ze(ye,e,"default",{},null),O(T,he)},$$slots:{default:!0,minimap:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"minimap",{},null),O(T,he)},controls:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"controls",{},null),O(T,he)},background:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"background",{},null),O(T,he)},toggle:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"toggle",{},null),O(T,he)},drawer:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"drawer",{},null),O(T,he)},contrast:(T,Ie)=>{var he=Ce(),Z=se(he);ze(Z,e,"contrast",{},null),O(T,he)}}})},Be=W=>{var T=ja();let Ie;Fe(he=>Ie=ot(T,"",Ie,he),[()=>({width:E()?E()+"px":"100%",height:v()?v()+"px":"100%"})]),O(W,T)};Le(Me,W=>{o(I)?W(ke):W(Be,!1)})}return O(t,P),Bo(e,"disconnect",xe),vt({disconnect:xe})}var Za=je("<button><!> </button>"),qa=je('<div class="h-dvh w-dvw overflow-hidden bg-[color:var(--bg)]"><div class="fixed left-4 top-4 z-40 flex gap-2"><button class="rounded-xl border border-white/10 px-3 py-2 backdrop-blur bg-black/20 text-white hover:bg-white/10 transition-colors"><!> Aperture (âK)</button> <button class="rounded-xl border border-white/10 px-3 py-2 backdrop-blur bg-black/20 text-white hover:bg-white/10 transition-colors"><!> Theme</button></div> <div class="fixed right-4 top-4 z-40 rounded-xl border border-white/10 px-4 py-3 backdrop-blur-sm bg-black/20 text-white"><div class="text-sm opacity-80">Now</div> <div class="font-medium">Focus: <span class="opacity-80"> </span></div> <div class="text-xs opacity-70">Two threads warm â¢ one promise due in 6h</div></div> <div class="fixed inset-x-0 bottom-4 z-40 mx-auto flex w-fit gap-2"></div> <div class="absolute inset-0"><!></div> <!></div>');function sl(t,e){gt(e,!1);const[n,r]=At(),i=()=>D(d,"$dark",n),a=()=>D(c,"$ritual",n),s=()=>D(f,"$filtered",n),l=x(""),c=x(null),d=x(!0),f=Nn([l,c],([j,B])=>{const X=wo.find(J=>J.id===B);return Fi.filter(J=>{const ee=J.title.toLowerCase(),F=!j||ee.includes(j.toLowerCase()),Y=!X||(!X.filter.kinds||X.filter.kinds.includes(J.kind))&&(!X.filter.pillars||X.filter.pillars.includes(J.pillarId))&&(X.filter.minActivity==null||J.activity>=X.filter.minActivity);return F&&Y})});let g=N(!1);const p=()=>b(g,!0);en(()=>{const j=B=>{(B.metaKey||B.ctrlKey)&&B.key.toLowerCase()==="k"&&(B.preventDefault(),p())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)}),mt();var E=qa(),v=De(E),m=De(v),y=De(m);Zi(y,{class:"inline -mt-0.5 w-4 h-4"}),mo(),Ae(m);var u=ce(m,2),L=De(u);qi(L,{class:"inline -mt-0.5 w-4 h-4"}),mo(),Ae(u),Ae(v);var M=ce(v,2),_=ce(De(M),2),S=ce(De(_)),A=De(S,!0);Ae(S),Ae(_),mo(2),Ae(M);var z=ce(M,2);Ht(z,5,()=>wo,on,(j,B)=>{var X=Za(),J=De(X);Vi(J,{class:"inline -mt-0.5 w-4 h-4"});var ee=ce(J);Ae(X),Fe(()=>{yt(X,1,`rounded-2xl border px-4 py-2 backdrop-blur hover:shadow transition-all ${a()===o(B).id?"bg-white/20 border-white/30":"bg-black/20 border-white/10"} text-white`),Fn(ee,` ${o(B).label??""}`)}),Ee("click",X,()=>c.set(a()===o(B).id?null:o(B).id)),O(j,X)}),Ae(z);var $=ce(z,2),Q=De($);{let j=Nt(()=>s().map((B,X)=>({id:B.id,position:{x:200+X%7*180,y:120+Math.floor(X/7)*140},data:{title:B.title,kind:B.kind,pillar:B.pillarId,activity:B.activity}})));Va(Q,{get nodes(){return o(j)},edges:[],zoomable:!0,pannable:!0,fitView:!0,minimap:!1,controls:!0,background:!1,edgeStyle:"step",class:"h-full w-full"})}Ae($);var ne=ce($,2);ts(ne,{get items(){return s()},placeholder:"Search @pillars #topics $systemsâ¦",onSelect:j=>{console.log("Selected:",j)},get open(){return o(g)},set open(j){b(g,j)},$$legacy:!0}),Ae(E),Fe(j=>{G(E,"data-theme",i()?"dark":"light"),Fn(A,j)},[()=>{var j;return((j=wo.find(B=>B.id===a()))==null?void 0:j.label)??"Free"}]),Ee("click",m,p),Ee("click",u,()=>d.set(!i())),O(t,E),vt(),r()}export{sl as _,ot as a,Qt as b,Gs as c,G as d,Ht as e,kr as f,No as g,co as h,il as i,Qn as j,Tt as p,Ar as r,yt as s,Bt as t,rr as z};
